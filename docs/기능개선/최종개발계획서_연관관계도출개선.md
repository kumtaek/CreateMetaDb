# ìµœì¢…ê°œë°œê³„íšì„œ - ì—°ê´€ê´€ê³„ ë„ì¶œ ê°œì„ 

## ğŸ“‹ ë¬¸ì„œ ê°œìš”

**ëª©ì **: SourceAnalyzerì˜ í•µì‹¬ ëª©í‘œì¸ **ì—°ê´€ê´€ê³„ ë„ì¶œ**ì— ì§‘ì¤‘í•œ ìµœì¢… í†µí•© ê°œë°œê³„íšì„œ  
**ê¸°ë°˜ ë¬¸ì„œ**: ê¸°ëŠ¥ê°œì„  í´ë”ì˜ ëª¨ë“  ë¬¸ì„œ ê²€í†  ë° í†µí•©  
**í•µì‹¬ ì² í•™**: "ì™„ë²½í•œ íŒŒì‹±ë³´ë‹¤ ì—°ê²°ê³ ë¦¬ ì°¾ê¸°" - ë³µì¡í•œ íŒŒì„œ êµ¬í˜„ë³´ë‹¤ëŠ” **ì—°ê´€ê´€ê³„ ì—°ê²°ê³ ë¦¬ ì¶”ì **ì— ëª¨ë“  ì—­ëŸ‰ ì§‘ì¤‘  
**ìµœì¢… ëª©í‘œ**: `í”„ë¡ íŠ¸íŒŒì¼(JSP/JSX/Vue) â†’ API_URL â†’ CLASS/METHOD â†’ XML â†’ QUERY â†’ TABLE â†’ Column` ì™„ì „í•œ ì—°ê²°ê³ ë¦¬ ë„ì¶œ

---

## ğŸ¯ í•µì‹¬ ëª©í‘œ ë° ì ‘ê·¼ ì›ì¹™

### 1. ìµœì¢… ëª©í‘œ: ì™„ì „í•œ ì—°ê²°ê³ ë¦¬ ë„ì¶œ

```
í”„ë¡ íŠ¸íŒŒì¼(JSP/JSX/Vue) â†’ API_URL â†’ CLASS/METHOD â†’ XML â†’ QUERY â†’ TABLE â†’ Column
```

ì´ **ì™„ì „í•œ ì—°ê²°ê³ ë¦¬**ë¥¼ ì •í™•í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆê²Œ ë„ì¶œí•˜ëŠ” ê²ƒì´ ìœ ì¼í•˜ê³  ìµœì¢…ì ì¸ ëª©í‘œì…ë‹ˆë‹¤.

### 2. í•µì‹¬ ì ‘ê·¼ ì›ì¹™

#### 2.1. **íƒìƒ‰ ìš°ì„  (Recall > Precision)**
- ì •í™•ì„±ë³´ë‹¤ **íƒì§€ìœ¨**ì„ ìš°ì„ ì‹œ
- ì˜ëª»ëœ ì—°ê²°(False Positive)ì´ ì¼ë¶€ í¬í•¨ë˜ë”ë¼ë„, ë†“ì¹˜ëŠ” ì—°ê²°(False Negative)ì´ ì—†ë„ë¡ ì„¤ê³„
- ëª¨ë“  ê°€ëŠ¥í•œ ì—°ê²°ê³ ë¦¬ë¥¼ íƒì§€í•˜ì—¬ í›„ì† ê²€ì¦ ë‹¨ê³„ì—ì„œ ì •ì œ

#### 2.2. **ë‹¨ìˆœí•œ ê·œì¹™ê³¼ íŒ¨í„´ í™œìš©**
- ë³µì¡í•œ AST(ì¶”ìƒ êµ¬ë¬¸ íŠ¸ë¦¬) íŒŒì‹±ì„ ìµœì†Œí™”
- ì •ê·œì‹, ëª…ëª… ì»¨ë²¤ì…˜, í‚¤ì›Œë“œ ê²€ìƒ‰ ë“± ê°€ë³ê³  ë¹ ë¥¸ ê·œì¹™ ê¸°ë°˜ ë¶„ì„ ì§€í–¥
- ë³µì¡í•œ íŒŒì„œ ëŒ€ì‹  **ì—°ê²°ê³ ë¦¬ ì¶”ì **ì— ì§‘ì¤‘

#### 2.3. **ì–‘ë°©í–¥ ë¶„ì„ (Bidirectional Analysis)**
- **ì •ë°©í–¥**: `í”„ë¡ íŠ¸ â†’ API â†’ METHOD â†’ XML â†’ QUERY â†’ TABLE`
- **ì—­ë°©í–¥**: `TABLE â†’ QUERY â†’ XML â†’ METHOD â†’ API â†’ í”„ë¡ íŠ¸`
- ì–‘ë°©í–¥ ë¶„ì„ ê²°ê³¼ë¥¼ êµì°¨ ê²€ì¦í•˜ì—¬ ì‹ ë¢°ë„ í–¥ìƒ ë° ëˆ„ë½ëœ ì—°ê²° ë°œê²¬

#### 2.4. **ì‹ ë¢°ë„ ê¸°ë°˜ ë¶„ë¥˜**
- **ğŸ¥‡ ëª…ì‹œì  ì—°ê²° (0.9-1.0)**: ì–´ë…¸í…Œì´ì…˜, XML ì„¤ì • ë“± ì½”ë“œì— ëª…ì‹œëœ í™•ì‹¤í•œ ì—°ê²°
- **ğŸ¥ˆ ê´€ë¡€ì  ì—°ê²° (0.7-0.8)**: ëª…ëª… ê·œì¹™ ë“± í”„ë¡œì íŠ¸ ê´€ë¡€ì— ê¸°ë°˜í•œ ì—°ê²°
- **ğŸ¥‰ ì¶”ë¡ ì  ì—°ê²° (0.4-0.6)**: ìœ ì‚¬ì„±, ë¬¸ìì—´ ë¦¬í„°ëŸ´ ë¶„ì„ ë“± ì¶”ë¡ ì— ê¸°ë°˜í•œ ì—°ê²°

---

## ğŸš¨ í˜„ì¬ ì‹œìŠ¤í…œì˜ í•µì‹¬ ë¬¸ì œì  (ê¸°ì¡´ ë¬¸ì„œ ì¢…í•©)

### 1. **API_URL â†’ METHOD ë§¤í•‘ ë¡œì§ ë¶€ì¬** (ìµœìš°ì„ )
- í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œì˜ ì—°ê²°ê³ ë¦¬ ë‹¨ì ˆ
- Spring Controller ì–´ë…¸í…Œì´ì…˜ ë¶„ì„ ë¯¸í¡
- URL íŒ¨í„´ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ë¶€ì¬

### 2. **Java â†’ XML ì—°ê²°ê³ ë¦¬ ë¶€ì¬**
- MyBatis Mapper ì¸í„°í˜ì´ìŠ¤ì™€ XML íŒŒì¼ ê°„ ë§¤í•‘ ì¶”ì  ë¶ˆê°€
- `UserMapper.java` â†” `UserMapper.xml` ì—°ê²° ë¡œì§ ë¶€ì¬

### 3. **JPA Entity â†’ TABLE ë§¤í•‘ ë¶€ì¬**
- `@Table` ì–´ë…¸í…Œì´ì…˜ê³¼ ì‹¤ì œ DB í…Œì´ë¸” ì—°ê²° ë¶ˆê°€
- JPA Entityì™€ Repository ê°„ ê´€ê³„ ë¶„ì„ ë¶€ì¡±

### 4. **í”„ë¡ íŠ¸ì—”ë“œ API í˜¸ì¶œ íŒ¨í„´ ë¶„ì„ ë¶€ì¡±**
- Vue/React/TypeScriptì˜ ë‹¤ì–‘í•œ API í˜¸ì¶œ ë°©ì‹ ë¶„ì„ ë¯¸í¡
- `axios`, `fetch`, `$.ajax` ë“± í”„ë ˆì„ì›Œí¬ë³„ íŒ¨í„´ ë¶„ì„ ë¶€ì¡±

### 5. **ì—°ê´€ê´€ê³„ ë„ì¶œ ì •í™•ë„ ë¶€ì¡±**
- ì¶”ë¡ (inferred) ì»´í¬ë„ŒíŠ¸ì— ê³¼ë„í•˜ê²Œ ì˜ì¡´í•˜ì—¬ ì‹ ë¢°ë„ í•˜ë½
- ì²´ì¸ ì—°ê²° ê²€ì¦ ì‹œìŠ¤í…œ ë¶€ì¬

### 6. **ì¤‘ë³µ ë°ì´í„° ë° íŒŒì‹± ëŠ¥ë ¥ í•œê³„** (ì‹¤íŒ¨ì‚¬ë¡€ ë¶„ì„ ê²°ê³¼)
- SQL ì»´í¬ë„ŒíŠ¸ 35.4% ì¤‘ë³µë¥ 
- ë™ì  SQL ë¶„ì„ ì‹œ ì¡°í•© í­ë°œ ë¬¸ì œ
- íŒŒì¼ ì¤‘ë³µ ë“±ë¡ìœ¼ë¡œ ì¸í•œ ë°ì´í„° í’ˆì§ˆ ì €í•˜

---

## ğŸ¯ ìš°ì„ ìˆœìœ„ë³„ í†µí•© ê°œì„  ë°©ì•ˆ

### **1ìˆœìœ„: API_URL â†’ METHOD ë§¤í•‘ ê°•í™”** (2-3ì£¼)

#### 1.1. Spring Controller ì–´ë…¸í…Œì´ì…˜ ë¶„ì„ ê°•í™”
```python
# parser/java_parser.py ìˆ˜ì •
def _analyze_spring_controller(self, file_path, content):
    # @RequestMapping, @GetMapping ë“± ëª¨ë“  HTTP ë©”ì†Œë“œ ì–´ë…¸í…Œì´ì…˜ ë¶„ì„
    base_url = self._extract_base_url(content)
    
    for method in self._extract_methods(content):
        api_url = self._build_full_url(base_url, method['url'])
        method_name = f"{class_name}.{method['name']}"
        
        # API_URL ì»´í¬ë„ŒíŠ¸ ìƒì„± ë° METHODì™€ ì—°ê²°
        self._create_api_method_relationship(api_url, method_name)
```

#### 1.2. URL íŒ¨í„´ ì •ê·œí™” ë° ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜
```python
# util/url_matcher.py ì‹ ê·œ ìƒì„±
class URLPatternMatcher:
    def normalize_url(self, url):
        # Path Variable ì •ê·œí™”: /api/users/{id} â†’ /api/users/.*
        
    def match_urls(self, frontend_url, backend_url):
        # ì •ê·œì‹ ê¸°ë°˜ URL ë§¤ì¹­
        # ì‹ ë¢°ë„ ì ìˆ˜ ë°˜í™˜
```

#### 1.3. ì„œë²„ ì„¤ì • íŒŒì¼ ë¶„ì„ (ë³´ì™„)
- `web.xml`ì˜ `<servlet-mapping>` ë¶„ì„
- Spring `WebMvcConfigurer` ì„¤ì • ë¶„ì„
- ì „ì—­ ë¼ìš°íŒ… ê·œì¹™ì„ í†µí•œ ë§¤í•‘ ì •í™•ë„ í–¥ìƒ

### **2ìˆœìœ„: Java â†’ XML ì—°ê²°ê³ ë¦¬ êµ¬í˜„** (2-3ì£¼)

#### 2.1. MyBatis Mapper ì¸í„°í˜ì´ìŠ¤ ë¶„ì„
```python
# parser/java_parser.py ìˆ˜ì •
def _analyze_mybatis_mapper(self, file_path, content):
    if '@Mapper' in content or 'Mapper' in file_path:
        class_name = self._extract_class_name(content)
        namespace = self._build_namespace(class_name)
        
        # XML íŒŒì¼ê³¼ ì—°ê²°
        self._link_mapper_to_xml(namespace, file_path)
```

#### 2.2. Java ë©”ì†Œë“œ â†” XML SQL ID ì—°ê²°
```python
# parser/xml_parser.py ìˆ˜ì •
def _analyze_mybatis_xml(self, file_path, content):
    namespace = self._extract_namespace(content)
    query_ids = self._extract_query_ids(content)
    
    for query_id in query_ids:
        method_name = f"{namespace}.{query_id}"
        # METHOD â†” QUERY ì—°ê²° (ê´€ë¡€ì  ì—°ê²°, ì‹ ë¢°ë„ 0.8)
        self._create_method_query_relationship(method_name, query_id, confidence=0.8)
```

### **3ìˆœìœ„: JPA Entity â†’ TABLE ë§¤í•‘ êµ¬í˜„** (2-3ì£¼)

#### 3.1. JPA Entity ì–´ë…¸í…Œì´ì…˜ ë¶„ì„
```python
# parser/java_parser.py ìˆ˜ì •
def _analyze_jpa_entity(self, file_path, content):
    if '@Entity' in content:
        class_name = self._extract_class_name(content)
        table_name = self._extract_table_name(content) or class_name.upper()
        
        # CLASS â†” TABLE ì—°ê²° (ëª…ì‹œì  ì—°ê²°, ì‹ ë¢°ë„ 1.0)
        self._create_class_table_relationship(class_name, table_name, confidence=1.0)
        
        # @Column ë¶„ì„í•˜ì—¬ í•„ë“œì™€ ì»¬ëŸ¼ ë§¤í•‘
        self._analyze_column_mappings(content, class_name, table_name)
```

#### 3.2. JPA Repository â†’ TABLE ì—°ê²°
```python
def _analyze_jpa_repository(self, file_path, content):
    if 'Repository' in content and '@Repository' in content:
        # Repository ì¸í„°í˜ì´ìŠ¤ì˜ ì œë„¤ë¦­ íƒ€ì… ë¶„ì„
        entity_type = self._extract_entity_type(content)
        table_name = self._infer_table_from_entity(entity_type)
        
        # Repository â†” TABLE ì—°ê²°
        self._create_repository_table_relationship(class_name, table_name)
```

#### 3.3. ë¬¸ìì—´ ë¦¬í„°ëŸ´ ê¸°ë°˜ SQL ë¶„ì„ (ë³´ì™„)
```python
def _analyze_string_sql(self, content):
    # JPQL/SQL ë¬¸ìì—´ íŒ¨í„´ ë¶„ì„
    sql_patterns = [
        r'createQuery\s*\(\s*["\']([^"\']+)["\']',
        r'createNativeQuery\s*\(\s*["\']([^"\']+)["\']'
    ]
    
    for pattern in sql_patterns:
        for match in re.finditer(pattern, content):
            sql_content = match.group(1)
            tables = self._extract_tables_from_sql(sql_content)
            # ì¶”ë¡ ì  ì—°ê²°ë¡œ í…Œì´ë¸” ê´€ê³„ ìƒì„±
```

### **4ìˆœìœ„: í”„ë¡ íŠ¸ì—”ë“œ API í˜¸ì¶œ íŒ¨í„´ ê°•í™”** (1-2ì£¼)

#### 4.1. í”„ë ˆì„ì›Œí¬ë³„ ë¶„ì„ê¸° êµ¬í˜„
```python
# parser/frontend_parser.py ì‹ ê·œ ìƒì„±
class FrontendParser:
    def parse_vue_file(self, content):
        # Vue.js API í˜¸ì¶œ íŒ¨í„´
        patterns = [
            r'axios\.(get|post|put|delete)\s*\(\s*["\']([^"\']+)["\']',
            r'this\.\$http\.(get|post|put|delete)\s*\(\s*["\']([^"\']+)["\']'
        ]
        
    def parse_react_file(self, content):
        # React API í˜¸ì¶œ íŒ¨í„´
        patterns = [
            r'fetch\s*\(\s*["\']([^"\']+)["\']',
            r'axios\.(get|post|put|delete)\s*\(\s*["\']([^"\']+)["\']'
        ]
        
    def parse_jsp_file(self, content):
        # JSP API í˜¸ì¶œ íŒ¨í„´
        patterns = [
            r'url\s*:\s*["\']([^"\']+)["\']',  # $.ajax
            r'action\s*=\s*["\']([^"\']+)["\']'  # form action
        ]
```

### **5ìˆœìœ„: ì²´ì¸ ì—°ê²° ê²€ì¦ ë° ì‹ ë¢°ë„ ì‹œìŠ¤í…œ** (2-3ì£¼)

#### 5.1. ì—°ê²°ê³ ë¦¬ ë¬´ê²°ì„± ê²€ì¦
```python
# util/chain_validator.py ì‹ ê·œ ìƒì„±
class ChainValidator:
    def validate_complete_chains(self):
        # í”„ë¡ íŠ¸ â†’ DBê¹Œì§€ ì™„ì „í•œ ì²´ì¸ ê²€ì¦
        complete_chains = []
        broken_chains = []
        
        for frontend_file in self._get_frontend_files():
            chain = self._trace_chain(frontend_file)
            if self._is_complete_chain(chain):
                complete_chains.append(chain)
            else:
                broken_chains.append(chain)
        
        return complete_chains, broken_chains
```

#### 5.2. ì²´ì¸ ì‹ ë¢°ë„ ê³„ì‚°
```python
def calculate_chain_confidence(self, chain):
    # ê° ì—°ê²°ê³ ë¦¬ ì‹ ë¢°ë„ì˜ ê³±ì…ˆìœ¼ë¡œ ê³„ì‚°
    total_confidence = 1.0
    for relationship in chain:
        total_confidence *= relationship.confidence
    
    return total_confidence
```

### **6ìˆœìœ„: ì–‘ë°©í–¥ ë¶„ì„ ë° êµì°¨ ê²€ì¦ ì‹œìŠ¤í…œ** (2-3ì£¼)

#### 6.1. DB-First ë¶„ì„ê¸° êµ¬í˜„
```python
# analyzer/reverse_analyzer.py ì‹ ê·œ ìƒì„±
class ReverseAnalyzer:
    def analyze_from_database(self):
        # DB ìŠ¤í‚¤ë§ˆ â†’ QUERY â†’ XML â†’ METHOD â†’ API_URL â†’ í”„ë¡ íŠ¸ íŒŒì¼
        for table in self._get_all_tables():
            chains = self._trace_from_table(table)
            self._store_reverse_chains(chains)
    
    def cross_validate_chains(self):
        # ì •ë°©í–¥ê³¼ ì—­ë°©í–¥ ë¶„ì„ ê²°ê³¼ ë¹„êµ
        forward_chains = self._get_forward_chains()
        reverse_chains = self._get_reverse_chains()
        
        return self._compare_chains(forward_chains, reverse_chains)
```

### **7ìˆœìœ„: ì‚¬ìš©ì í”¼ë“œë°± ë£¨í”„ ë° í•™ìŠµ ê¸°ëŠ¥** (1-2ì£¼)

#### 7.1. ê´€ê³„ ìˆ˜ì •/í™•ì • ì¸í„°í˜ì´ìŠ¤
```python
# interface/relationship_editor.py ì‹ ê·œ ìƒì„±
class RelationshipEditor:
    def confirm_relationship(self, src_id, dst_id, rel_type):
        # ì‚¬ìš©ìê°€ í™•ì •í•œ ê´€ê³„ë¥¼ ìµœê³  ì‹ ë¢°ë„ë¡œ ì €ì¥
        
    def remove_relationship(self, src_id, dst_id, rel_type):
        # ì˜ëª»ëœ ê´€ê³„ ì œê±°
        
    def add_relationship(self, src_id, dst_id, rel_type):
        # ëŠì–´ì§„ ê´€ê³„ ìˆ˜ë™ ì—°ê²°
```

#### 7.2. í•™ìŠµ ë°ì´í„° í™œìš©
```python
# util/learning_manager.py ì‹ ê·œ ìƒì„±
class LearningManager:
    def load_confirmed_relationships(self):
        # ì´ì „ì— ì‚¬ìš©ìê°€ í™•ì •í•œ ê´€ê³„ ë¡œë“œ
        
    def apply_learning_data(self, analysis_results):
        # í•™ìŠµ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹ ë¢°ë„ ì¡°ì •
```

---

## ğŸ”§ êµ¬í˜„ ì„¸ë¶€ ë°©ì•ˆ

### 1. **ë¶„ì„ê¸° êµ¬ì¡° ê°œì„ **

#### 1.1. Parser-Builder íŒ¨í„´ ë„ì…
```python
# relationship_builder.py ì‹ ê·œ ìƒì„±
class RelationshipBuilder:
    def __init__(self, project_name, project_id, all_extracted_data):
        self.project_name = project_name
        self.project_id = project_id
        self.db = DatabaseUtils(f'projects/{project_name}/metadata.db')
        self.data = all_extracted_data  # ëª¨ë“  íŒŒì„œì˜ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸
    
    def build_all_relationships(self):
        # 1. API ê´€ë ¨ ê´€ê³„ êµ¬ì¶•
        self._build_api_relationships()
        # 2. MyBatis ê´€ë ¨ ê´€ê³„ êµ¬ì¶•
        self._build_mybatis_relationships()
        # 3. JPA ê´€ë ¨ ê´€ê³„ êµ¬ì¶•
        self._build_jpa_relationships()
        # 4. ì²´ì¸ ê²€ì¦ ë° ì‹ ë¢°ë„ ê³„ì‚°
        self._validate_and_score_chains()
```

#### 1.2. ê° íŒŒì„œì˜ ì—­í•  ëª…í™•í™”
- **Parser**: ì—°ê´€ê´€ê³„ì˜ ë‹¨ì„œ(raw data)ë§Œ ì¶”ì¶œ
- **Builder**: íŒŒì„œë“¤ì´ ìˆ˜ì§‘í•œ ë‹¨ì„œë“¤ì„ ì¢…í•©í•˜ì—¬ ìµœì¢… ê´€ê³„ ì„¤ì •
- **Validator**: ê´€ê³„ì˜ ì‹ ë¢°ë„ ê²€ì¦ ë° ì²´ì¸ ë¬´ê²°ì„± í™•ì¸

### 2. **ì„¤ì • í™•ì¥**

#### 2.1. `relationship_patterns.yaml` ì‹ ê·œ ìƒì„±
```yaml
# config/relationship_patterns.yaml
api_patterns:
  vue:
    - "axios\\.(get|post|put|delete)\\s*\\(\\s*[\"']([^\"']+)[\"']"
    - "this\\.\\$http\\.(get|post|put|delete)\\s*\\(\\s*[\"']([^\"']+)[\"']"
  react:
    - "fetch\\s*\\(\\s*[\"']([^\"']+)[\"']"
    - "axios\\.(get|post|put|delete)\\s*\\(\\s*[\"']([^\"']+)[\"']"
  jsp:
    - "url\\s*:\\s*[\"']([^\"']+)[\"']"
    - "action\\s*=\\s*[\"']([^\"']+)[\"']"

spring_annotations:
  controller:
    - "@RestController"
    - "@Controller"
  mapping:
    - "@RequestMapping"
    - "@GetMapping"
    - "@PostMapping"
    - "@PutMapping"
    - "@DeleteMapping"

jpa_annotations:
  entity:
    - "@Entity"
    - "@Table"
    - "@Column"
  repository:
    - "@Repository"
    - "Repository<.*>"

mybatis_patterns:
  xml:
    - "<mapper\\s+namespace=\"([^\"]+)\">"
    - "<(?:select|insert|update|delete)\\s+id=\"([^\"]+)\">"
  java:
    - "@Mapper"
    - "Mapper"
```

### 3. **DB ìŠ¤í‚¤ë§ˆ í™•ì¥**

#### 3.1. `relationships` í…Œì´ë¸” ê°œì„ 
```sql
-- database/create_table_script.sqlì— ì¶”ê°€
CREATE TABLE IF NOT EXISTS relationships (
    relationship_id INTEGER PRIMARY KEY AUTOINCREMENT,
    src_id INTEGER NOT NULL,
    dst_id INTEGER NOT NULL,
    rel_type VARCHAR(50) NOT NULL,
    confidence REAL DEFAULT 1.0,  -- ì‹ ë¢°ë„ ì ìˆ˜ (0.0 ~ 1.0)
    line_number INTEGER,
    is_inferred INTEGER DEFAULT 0,  -- 0: ëª…ì‹œì , 1: ê´€ë¡€ì , 2: ì¶”ë¡ ì 
    created_at DATETIME DEFAULT (datetime('now', '+9 hours')),
    del_yn CHAR(1) DEFAULT 'N',
    FOREIGN KEY (src_id) REFERENCES components (component_id),
    FOREIGN KEY (dst_id) REFERENCES components (component_id),
    UNIQUE(src_id, dst_id, rel_type)
);

-- ì²´ì¸ ì •ë³´ ì €ì¥ í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS connection_chains (
    chain_id INTEGER PRIMARY KEY AUTOINCREMENT,
    project_id INTEGER NOT NULL,
    chain_type VARCHAR(20) NOT NULL,  -- 'FORWARD', 'REVERSE'
    chain_data TEXT NOT NULL,  -- JSON í˜•íƒœë¡œ ì²´ì¸ ì •ë³´ ì €ì¥
    confidence REAL DEFAULT 1.0,
    is_complete INTEGER DEFAULT 0,  -- 0: ë¶ˆì™„ì „, 1: ì™„ì „
    created_at DATETIME DEFAULT (datetime('now', '+9 hours')),
    del_yn CHAR(1) DEFAULT 'N',
    FOREIGN KEY (project_id) REFERENCES projects (project_id)
);
```

### 4. **ë¦¬í¬íŠ¸ í™•ì¥**

#### 4.1. `RelationshipReportGenerator` ì‹ ê·œ ìƒì„±
```python
# reports/relationship_report_generator.py
class RelationshipReportGenerator:
    def generate_chain_report(self):
        # ì™„ì „í•œ ì²´ì¸ê³¼ ëŠì–´ì§„ ì²´ì¸ ë¦¬í¬íŠ¸
        
    def generate_confidence_report(self):
        # ì‹ ë¢°ë„ë³„ ê´€ê³„ í˜„í™© ë¦¬í¬íŠ¸
        
    def generate_broken_chain_report(self):
        # ëŠì–´ì§„ ì²´ì¸ ìƒì„¸ ë¶„ì„ ë¦¬í¬íŠ¸
        
    def generate_cross_validation_report(self):
        # ì–‘ë°©í–¥ ë¶„ì„ êµì°¨ ê²€ì¦ ê²°ê³¼ ë¦¬í¬íŠ¸
```

---

## ğŸ“Š ê¸°ëŒ€ íš¨ê³¼

### 1. **ì—°ê²°ê³ ë¦¬ ì™„ì„±ë„ í–¥ìƒ**
- ì¶”ë¡ ì— ì˜ì¡´í–ˆë˜ ë¶ˆì™„ì „í•œ ì—°ê²°ì„ ëª…ì‹œì /ê´€ë¡€ì  ë§¤í•‘ ê¸°ë°˜ì˜ ì •í™•í•œ ì—°ê²°ë¡œ ì „í™˜
- ëˆ„ë½ëœ ì—°ê²°ê³ ë¦¬ ë°œê²¬ë¥  90% ì´ìƒ í–¥ìƒ

### 2. **ì—°ê´€ê´€ê³„ ì‹ ë¢°ë„ í–¥ìƒ**
- ëª¨ë“  ì—°ê²°ì— ì‹ ë¢°ë„ ì ìˆ˜ë¥¼ ë¶€ì—¬í•˜ì—¬ ë¶„ì„ ê²°ê³¼ì˜ ëª…í™•ì„± ì œê³µ
- ì‹ ë¢°ë„ ê¸°ë°˜ ì˜ì‚¬ê²°ì • ì§€ì›

### 3. **ê°œë°œì ìƒì‚°ì„± í–¥ìƒ**
- ìˆ˜ë™ìœ¼ë¡œ íŒŒì•…í•´ì•¼ í–ˆë˜ ì‹œìŠ¤í…œì˜ ì¢…ë‹¨ ê°„(End-to-End) íë¦„ì„ ìë™í™”ëœ ë¦¬í¬íŠ¸ë¡œ ì œê³µ
- ì˜í–¥ë„ ë¶„ì„ ì‹œê°„ 80% ë‹¨ì¶•

### 4. **ì‹œìŠ¤í…œ ì´í•´ë„ í–¥ìƒ**
- ì „ì²´ ì‹œìŠ¤í…œì˜ êµ¬ì¡°ì™€ ë°ì´í„° íë¦„ì„ ëª…í™•í•˜ê²Œ íŒŒì•…
- ìœ ì§€ë³´ìˆ˜ ë° ì‹ ê·œ ê°œë°œì˜ íš¨ìœ¨ì„± ê·¹ëŒ€í™”

---

## ğŸš€ êµ¬í˜„ ë¡œë“œë§µ

### **Phase 1 (2-3ì£¼): í•µì‹¬ ì—°ê²°ê³ ë¦¬ êµ¬í˜„**
- **1ìˆœìœ„**: API_URL â†’ METHOD ë§¤í•‘ ê°•í™”
- **2ìˆœìœ„**: Java â†’ XML ì—°ê²°ê³ ë¦¬ êµ¬í˜„
- **ëª©í‘œ**: ê¸°ë³¸ì ì¸ ì—°ê²°ê³ ë¦¬ ë„ì¶œ ê°€ëŠ¥

### **Phase 2 (2-3ì£¼): JPA ë° í”„ë¡ íŠ¸ì—”ë“œ ì§€ì›**
- **3ìˆœìœ„**: JPA Entity â†’ TABLE ë§¤í•‘ êµ¬í˜„
- **4ìˆœìœ„**: í”„ë¡ íŠ¸ì—”ë“œ API í˜¸ì¶œ íŒ¨í„´ ê°•í™”
- **ëª©í‘œ**: ëª¨ë“  ê¸°ìˆ  ìŠ¤íƒ ì§€ì› ì™„ë£Œ

### **Phase 3 (2-3ì£¼): í’ˆì§ˆ í–¥ìƒ**
- **5ìˆœìœ„**: ì²´ì¸ ì—°ê²° ê²€ì¦ ë° ì‹ ë¢°ë„ ì‹œìŠ¤í…œ
- **6ìˆœìœ„**: ì–‘ë°©í–¥ ë¶„ì„ ë° êµì°¨ ê²€ì¦ ì‹œìŠ¤í…œ
- **ëª©í‘œ**: ë¶„ì„ í’ˆì§ˆ ë° ì‹ ë¢°ë„ í–¥ìƒ

### **Phase 4 (1-2ì£¼): ì‚¬ìš©ì ê²½í—˜ ê°œì„ **
- **7ìˆœìœ„**: ì‚¬ìš©ì í”¼ë“œë°± ë£¨í”„ ë° í•™ìŠµ ê¸°ëŠ¥
- **ëª©í‘œ**: ì‚¬ìš©ì ì¹œí™”ì  ì¸í„°í˜ì´ìŠ¤ ë° ì§€ì†ì  ê°œì„ 

---

## ğŸ“ ê²°ë¡ 

**í•µì‹¬ì€ ë³µì¡í•œ íŒŒì„œê°€ ì•„ë‹Œ, ë‹¨ìˆœí•˜ê³  ì •í™•í•œ ì—°ê²° ë§¤í•‘ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.**

ë³¸ ìµœì¢… ê°œë°œê³„íšì„œëŠ” `í”„ë¡ íŠ¸íŒŒì¼ â†’ API_URL â†’ CLASS/METHOD â†’ XML â†’ QUERY â†’ TABLE â†’ Column` ì—°ê²°ê³ ë¦¬ë¥¼ **ì •í™•í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆê²Œ** ë„ì¶œí•˜ëŠ” ê²ƒì„ ìµœìš°ì„  ëª©í‘œë¡œ ì‚¼ìŠµë‹ˆë‹¤. 

ê¸°ì¡´ ë¬¸ì„œë“¤ì˜ ê²€í†  ê²°ê³¼, **íŒŒì‹± ì •í™•ë„ë³´ë‹¤ëŠ” ì—°ê²°ê³ ë¦¬ ì¶”ì **ì— ì§‘ì¤‘í•´ì•¼ í•¨ì„ í™•ì¸í–ˆìœ¼ë©°, ì´ë¥¼ í†µí•´ SourceAnalyzerëŠ” ê°œë°œìê°€ ì‹œìŠ¤í…œì˜ ì „ì²´ êµ¬ì¡°ë¥¼ ëª…í™•í•˜ê²Œ íŒŒì•…í•˜ê³  íƒìƒ‰í•  ìˆ˜ ìˆëŠ” **ê°•ë ¥í•œ "ì‹œìŠ¤í…œ ë‚´ë¹„ê²Œì´ì…˜"**ìœ¼ë¡œ ê±°ë“­ë‚  ê²ƒì…ë‹ˆë‹¤.

### ì£¼ìš” ê°œì„ ì  ìš”ì•½
1. **API_URL â†’ METHOD ë§¤í•‘** ê°•í™”ë¡œ í”„ë¡ íŠ¸-ë°±ì—”ë“œ ì—°ê²°ê³ ë¦¬ ì™„ì„±
2. **Java â†’ XML ì—°ê²°** êµ¬í˜„ìœ¼ë¡œ MyBatis ë§¤í•‘ ì¶”ì  ê°€ëŠ¥
3. **JPA Entity â†’ TABLE ë§¤í•‘** êµ¬í˜„ìœ¼ë¡œ JPA ì§€ì› ì™„ë£Œ
4. **ì–‘ë°©í–¥ ë¶„ì„** ë„ì…ìœ¼ë¡œ ëˆ„ë½ëœ ì—°ê²°ê³ ë¦¬ ë°œê²¬
5. **ì‹ ë¢°ë„ ì‹œìŠ¤í…œ** ë„ì…ìœ¼ë¡œ ë¶„ì„ ê²°ê³¼ì˜ ëª…í™•ì„± ì œê³µ
6. **ì‚¬ìš©ì í”¼ë“œë°±** ë£¨í”„ë¡œ ì§€ì†ì  ê°œì„  ê°€ëŠ¥

---

**ë¬¸ì„œ ë²„ì „**: 3.0 (Final)  
**ì‘ì„±ì¼**: 2025ë…„ 1ì›” 17ì¼  
**ê¸°ë°˜ ë¬¸ì„œ**: ê¸°ëŠ¥ê°œì„  í´ë” ì „ì²´ ë¬¸ì„œ ê²€í†  ë° í†µí•©
