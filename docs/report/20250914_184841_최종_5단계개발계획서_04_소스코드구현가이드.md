# ìµœì¢… 5ë‹¨ê³„ ê°œë°œê³„íšì„œ - 4ì¥: ì†ŒìŠ¤ì½”ë“œ êµ¬í˜„ ê°€ì´ë“œ

## ë¬¸ì„œ ì •ë³´
- **ì‘ì„±ì¼**: 2025-09-14 18:48:41
- **ì‘ì„±ì**: AI Assistant
- **ë¬¸ì„œ ìœ í˜•**: ìµœì¢… í†µí•© ê°œë°œê³„íšì„œ
- **ëŒ€ìƒ ë‹¨ê³„**: 5ë‹¨ê³„ - JSP íŒŒì¼ ë¶„ì„ ë° ì»´í¬ë„ŒíŠ¸ ë“±ë¡
- **ë¬¸ì„œ ë²„ì „**: v1.0 (ìµœì¢… í†µí•©ë³¸)

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš” ë° ìš”êµ¬ì‚¬í•­](./20250914_184841_ìµœì¢…_5ë‹¨ê³„ê°œë°œê³„íšì„œ_01_ê°œìš”ë°ìš”êµ¬ì‚¬í•­.md)
2. [ì•„í‚¤í…ì²˜ ì„¤ê³„](./20250914_184841_ìµœì¢…_5ë‹¨ê³„ê°œë°œê³„íšì„œ_02_ì•„í‚¤í…ì²˜ì„¤ê³„.md)
3. [ìƒì„¸ êµ¬í˜„ ê³„íš](./20250914_184841_ìµœì¢…_5ë‹¨ê³„ê°œë°œê³„íšì„œ_03_ìƒì„¸êµ¬í˜„ê³„íš.md)
4. [ì†ŒìŠ¤ì½”ë“œ êµ¬í˜„ ê°€ì´ë“œ](./20250914_184841_ìµœì¢…_5ë‹¨ê³„ê°œë°œê³„íšì„œ_04_ì†ŒìŠ¤ì½”ë“œêµ¬í˜„ê°€ì´ë“œ.md) â† **í˜„ì¬ ë¬¸ì„œ**
5. [í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ ê³„íš](./20250914_184841_ìµœì¢…_5ë‹¨ê³„ê°œë°œê³„íšì„œ_05_í…ŒìŠ¤íŠ¸ë°ê²€ì¦ê³„íš.md)

---

## 1. User Rules ì¤€ìˆ˜ì‚¬í•­ (ë°˜ë“œì‹œ ì¤€ìˆ˜)

### 1.1 ì˜ˆì™¸ ì²˜ë¦¬ ê·œì¹™ (ì¤‘ìš”!)
- **íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨**
- **íŒŒì‹±ì—ëŸ¬ëŠ” has_error='Y', error_message ì €ì¥ í›„ ê³„ì† ì‹¤í–‰(exit ì•ˆí•¨)**
- **ê·¸ ë°–ì— warning í›„ ê³„ì† ì‹¤í–‰í•˜ëŠ” ê²½ìš°ëŠ” ì—†ìŒ**

### 1.2 ê³µí†µí•¨ìˆ˜ ì‚¬ìš© ì§€í–¥
- **ê²½ë¡œê´€ë ¨ í•¨ìˆ˜**: Windows, RHEL í¬ë¡œìŠ¤í”Œë«í¼ ëŒ€ì‘
- **ì¤‘ë³µê³µí†µí•¨ìˆ˜ ìƒì„± ì§€ì–‘**: ./util/ í™•ì¸ í›„ ì‹ ê·œ ê³µí†µí•¨ìˆ˜ ê°œë°œ
- **í•˜ë“œì½”ë”© ì§€ì–‘**: ëª¨ë“  ì„¤ì •ì€ íŒŒì¼ì—ì„œ ë¡œë“œ

---

## 2. jsp_loading.py êµ¬í˜„

### 2.1 ì „ì²´ íŒŒì¼ êµ¬ì¡°
```python
"""
5ë‹¨ê³„ JSP íŒŒì¼ ë¶„ì„ ë° ì»´í¬ë„ŒíŠ¸ ë“±ë¡
- JSP íŒŒì¼ íŒŒì‹± ë° JSP ì»´í¬ë„ŒíŠ¸ ì •ë³´ ì¶”ì¶œ
- JSP â†’ Java ë©”ì„œë“œ ê´€ê³„ ë¶„ì„
- ë©”ëª¨ë¦¬ ìµœì í™”ë¥¼ í†µí•œ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬
"""

import os
import re
from typing import List, Dict, Any, Optional
from util.logger import info, warning, handle_error
from util.database_utils import DatabaseUtils
from util.file_utils import FileUtils
from util.path_utils import PathUtils
from util.config_utils import ConfigUtils
from util.hash_utils import HashUtils
from parser.jsp_parser import JspParser

class JspLoadingEngine:
    """5ë‹¨ê³„ JSP ë¡œë”© ì—”ì§„"""
    
    def __init__(self, project_name: str):
        """JSP ë¡œë”© ì—”ì§„ ì´ˆê¸°í™”"""
        try:
            self.project_name = project_name
            
            # USER RULES: ê³µí†µí•¨ìˆ˜ ì‚¬ìš© ì§€í–¥
            self.path_utils = PathUtils()
            self.config_utils = ConfigUtils()
            
            # í”„ë¡œì íŠ¸ ê²½ë¡œ ì„¤ì • (í•˜ë“œì½”ë”© ê¸ˆì§€)
            self.project_source_path = self.path_utils.get_project_source_path(project_name)
            self.metadata_db_path = self.path_utils.get_project_metadata_db_path(project_name)
            
            # JSP íŒŒì„œ ì´ˆê¸°í™”
            self.jsp_parser = JspParser(project_name=project_name)
            
            # í†µê³„ ì •ë³´ ì´ˆê¸°í™”
            self.stats = {
                'jsp_files_processed': 0,
                'jsp_components_created': 0,
                'jsp_method_relationships_created': 0,
                'errors': 0
            }
            
            info(f"JSP ë¡œë”© ì—”ì§„ ì´ˆê¸°í™” ì™„ë£Œ: {project_name}")
            
        except Exception as e:
            # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
            handle_error(e, "JSP ë¡œë”© ì—”ì§„ ì´ˆê¸°í™” ì‹¤íŒ¨")
```

### 2.2 execute_jsp_loading() ë©”ì„œë“œ
```python
def execute_jsp_loading(self) -> bool:
    """5ë‹¨ê³„ ì²˜ë¦¬ ì‹¤í–‰"""
    try:
        info("=== JSP ë¡œë”© ì‹œì‘: 5ë‹¨ê³„ ì²˜ë¦¬ ===")
        
        # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
        self.db_utils = DatabaseUtils(self.metadata_db_path)
        
        # USER RULES: target_source_config.yaml í™œìš©
        target_config = self.config_utils.load_target_source_config(self.project_name)
        
        # JSP íŒŒì¼ ìˆ˜ì§‘
        jsp_files = self.jsp_parser.get_filtered_jsp_files(self.project_source_path, target_config)
        if not jsp_files:
            info("ë¶„ì„í•  JSP íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤")
            return True
        
        info(f"JSP íŒŒì¼ ìˆ˜ì§‘ ì™„ë£Œ: {len(jsp_files)}ê°œ")
        
        # JSP íŒŒì¼ë³„ í†µí•© ì²˜ë¦¬
        for jsp_file in jsp_files:
            try:
                # JSP íŒŒì¼ íŒŒì‹±
                result = self.jsp_parser.parse_jsp_file(jsp_file)
                
                # JSP ì»´í¬ë„ŒíŠ¸ ì €ì¥
                if result['jsp_component']:
                    if self._save_jsp_components_to_database([result['jsp_component']]):
                        self.stats['jsp_components_created'] += 1
                
                # JSP â†’ METHOD ê´€ê³„ ì €ì¥
                if result['java_method_relationships']:
                    if self._save_jsp_method_relationships_to_database(result['java_method_relationships']):
                        self.stats['jsp_method_relationships_created'] += len(result['java_method_relationships'])
                
                # ì˜¤ë¥˜ í†µê³„ ì—…ë°ì´íŠ¸
                if result.get('has_error') == 'Y':
                    self.stats['errors'] += 1
                
                self.stats['jsp_files_processed'] += 1
                
            except Exception as e:
                # USER RULES: íŒŒì‹±ì—ëŸ¬ëŠ” has_error='Y', error_message ì €ì¥ í›„ ê³„ì† ì‹¤í–‰(exitì•ˆí•¨)
                warning(f"JSP íŒŒì¼ ì²˜ë¦¬ ì‹¤íŒ¨: {jsp_file}, ì˜¤ë¥˜: {str(e)}")
                self.stats['errors'] += 1
                continue
        
        # í†µê³„ ì •ë³´ ì¶œë ¥
        self._print_jsp_loading_statistics()
        
        # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í•´ì œ
        self.db_utils.close()
        
        info("=== JSP ë¡œë”© ì™„ë£Œ ===")
        return True
        
    except Exception as e:
        # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
        handle_error(e, "JSP ë¡œë”© ì‹¤í–‰ ì‹¤íŒ¨")
        return False
```

### 2.3 ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ë©”ì„œë“œë“¤
```python
def _save_jsp_components_to_database(self, jsp_components: List[Dict[str, Any]]) -> bool:
    """JSP ì»´í¬ë„ŒíŠ¸ë¥¼ components í…Œì´ë¸”ì— ì €ì¥"""
    try:
        if not jsp_components:
            return True
        
        # í”„ë¡œì íŠ¸ ID ì¡°íšŒ
        project_id = self._get_project_id()
        if not project_id:
            # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
            handle_error(Exception("í”„ë¡œì íŠ¸ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"), "JSP ì»´í¬ë„ŒíŠ¸ ì €ì¥ ì‹¤íŒ¨")
            return False
        
        # JSP ë°ì´í„° ë³€í™˜
        jsp_data_list = []
        for jsp_info in jsp_components:
            if not jsp_info:
                continue
                
            # íŒŒì¼ ID ì¡°íšŒ
            file_id = self._get_file_id(jsp_info['file_path'])
            if not file_id:
                # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
                handle_error(Exception(f"íŒŒì¼ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {jsp_info['file_path']}"), "íŒŒì¼ ID ì¡°íšŒ ì‹¤íŒ¨")
            
            jsp_data = {
                'project_id': project_id,
                'component_type': 'JSP',
                'component_name': jsp_info['jsp_name'],
                'parent_id': None,
                'file_id': file_id,
                'line_start': jsp_info['line_start'],
                'line_end': jsp_info['line_end'],
                'hash_value': jsp_info['hash_value'],
                'has_error': 'N',
                'error_message': None,
                'del_yn': 'N'
            }
            jsp_data_list.append(jsp_data)
        
        # ë°°ì¹˜ ì €ì¥
        if jsp_data_list:
            processed_count = self.db_utils.batch_insert_or_replace('components', jsp_data_list)
            if processed_count > 0:
                info(f"JSP ì»´í¬ë„ŒíŠ¸ ì €ì¥ ì™„ë£Œ: {processed_count}ê°œ")
                return True
            else:
                # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
                handle_error(Exception("JSP ì»´í¬ë„ŒíŠ¸ ì €ì¥ ì‹¤íŒ¨"), "JSP ì»´í¬ë„ŒíŠ¸ ì €ì¥ ì‹¤íŒ¨")
                return False
        else:
            # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
            handle_error(Exception("ì €ì¥í•  ìœ íš¨í•œ JSP ì»´í¬ë„ŒíŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤"), "JSP ì»´í¬ë„ŒíŠ¸ ë°ì´í„° ì—†ìŒ")
            
    except Exception as e:
        # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
        handle_error(e, "JSP ì»´í¬ë„ŒíŠ¸ ì €ì¥ ì‹¤íŒ¨")
        return False

def _save_jsp_method_relationships_to_database(self, relationships: List[Dict[str, Any]]) -> bool:
    """JSP â†’ METHOD ê´€ê³„ë¥¼ relationships í…Œì´ë¸”ì— ì €ì¥"""
    try:
        if not relationships:
            return True
        
        # í”„ë¡œì íŠ¸ ID ì¡°íšŒ
        project_id = self._get_project_id()
        if not project_id:
            # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
            handle_error(Exception("í”„ë¡œì íŠ¸ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"), "JSP â†’ METHOD ê´€ê³„ ì €ì¥ ì‹¤íŒ¨")
            return False
        
        # ê´€ê³„ ë°ì´í„° ë³€í™˜
        relationship_data_list = []
        for rel_info in relationships:
            # JSP ì»´í¬ë„ŒíŠ¸ ID ì¡°íšŒ
            jsp_component_id = self._get_jsp_component_id(project_id, rel_info['jsp_name'])
            if not jsp_component_id:
                # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
                handle_error(Exception(f"JSP ì»´í¬ë„ŒíŠ¸ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {rel_info['jsp_name']}"), "JSP ì»´í¬ë„ŒíŠ¸ ID ì¡°íšŒ ì‹¤íŒ¨")
            
            # METHOD ì»´í¬ë„ŒíŠ¸ ID ì¡°íšŒ
            method_component_id = self._get_method_component_id(
                project_id, rel_info['class_name'], rel_info['method_name']
            )
            if not method_component_id:
                # inferred ë©”ì„œë“œ ìƒì„±
                method_component_id = self._create_inferred_method_component(
                    project_id, rel_info['class_name'], rel_info['method_name']
                )
            
            if not method_component_id:
                # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
                handle_error(Exception(f"METHOD ì»´í¬ë„ŒíŠ¸ IDë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {rel_info['class_name']}.{rel_info['method_name']}"), "METHOD ì»´í¬ë„ŒíŠ¸ ìƒì„± ì‹¤íŒ¨")
            
            relationship_data = {
                'src_id': jsp_component_id,
                'dst_id': method_component_id,
                'rel_type': 'CALL_METHOD',
                'confidence': 1.0,
                'has_error': 'N',
                'error_message': None,
                'hash_value': '-',  # USER RULES: í•˜ë“œì½”ë”©ëœ '-'
                'del_yn': 'N'
            }
            relationship_data_list.append(relationship_data)
        
        # ë°°ì¹˜ ì €ì¥
        if relationship_data_list:
            processed_count = self.db_utils.batch_insert_or_replace('relationships', relationship_data_list)
            if processed_count > 0:
                info(f"JSP â†’ METHOD ê´€ê³„ ì €ì¥ ì™„ë£Œ: {processed_count}ê°œ")
                return True
            else:
                # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
                handle_error(Exception("JSP â†’ METHOD ê´€ê³„ ì €ì¥ ì‹¤íŒ¨"), "JSP â†’ METHOD ê´€ê³„ ì €ì¥ ì‹¤íŒ¨")
                return False
        else:
            # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
            handle_error(Exception("ì €ì¥í•  ìœ íš¨í•œ JSP â†’ METHOD ê´€ê³„ê°€ ì—†ìŠµë‹ˆë‹¤"), "ê´€ê³„ ë°ì´í„° ì—†ìŒ")
            
    except Exception as e:
        # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
        handle_error(e, "JSP â†’ METHOD ê´€ê³„ ì €ì¥ ì‹¤íŒ¨")
        return False
```

---

## 3. parser/jsp_parser.py êµ¬í˜„

### 3.1 ì „ì²´ íŒŒì¼ êµ¬ì¡°
```python
"""
JSP íŒŒì¼ íŒŒì‹± ë° ë¶„ì„ ë¡œì§
- JSP íŒŒì¼ ìˆ˜ì§‘ ë° í•„í„°ë§
- JSP ì»´í¬ë„ŒíŠ¸ ì •ë³´ ì¶”ì¶œ
- Java ë©”ì„œë“œ í˜¸ì¶œ ë¶„ì„
"""

import os
import re
from typing import List, Dict, Any, Optional
from util.logger import info, warning, handle_error
from util.file_utils import FileUtils
from util.path_utils import PathUtils
from util.config_utils import ConfigUtils
from util.hash_utils import HashUtils

class JspParser:
    """JSP íŒŒì„œ - 5ë‹¨ê³„ í†µí•© ì²˜ë¦¬"""
    
    def __init__(self, project_name: str):
        """JSP íŒŒì„œ ì´ˆê¸°í™”"""
        try:
            self.project_name = project_name
            
            # USER RULES: í•˜ë“œì½”ë”© ì§€ì–‘ - ì„¤ì • íŒŒì¼ì—ì„œ íŒ¨í„´ ë¡œë“œ
            self.path_utils = PathUtils()
            self.config_utils = ConfigUtils()
            
            # JSP í‚¤ì›Œë“œ ì„¤ì • ë¡œë“œ
            config_path = self.path_utils.get_jsp_keyword_config_path()
            self.config = self.config_utils.load_yaml_config(config_path)
            
            info(f"JSP íŒŒì„œ ì´ˆê¸°í™” ì™„ë£Œ: {config_path}")
            
        except Exception as e:
            # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
            handle_error(e, "JSP íŒŒì„œ ì´ˆê¸°í™” ì‹¤íŒ¨")
```

### 3.2 JSP íŒŒì¼ ìˆ˜ì§‘ êµ¬í˜„
```python
def get_filtered_jsp_files(self, project_path: str, target_config: Dict[str, Any]) -> List[str]:
    """JSP íŒŒì¼ ìˆ˜ì§‘ ë° í•„í„°ë§"""
    try:
        # USER RULES: ê³µí†µí•¨ìˆ˜ ì‚¬ìš© ì§€í–¥
        file_utils = FileUtils()
        
        # USER RULES: target_source_config.yaml í™œìš©
        include_patterns = target_config.get('include_patterns', [])
        exclude_patterns = target_config.get('exclude_patterns', [])
        
        jsp_files = []
        for root, dirs, files in os.walk(project_path):
            for file in files:
                if file.endswith('.jsp'):
                    file_path = os.path.join(root, file)
                    
                    # í¬í•¨/ì œì™¸ íŒ¨í„´ í™•ì¸
                    if self._is_file_included(file_path, include_patterns, exclude_patterns):
                        if self._is_valid_jsp_file(file_path):
                            jsp_files.append(file_path)
        
        info(f"JSP íŒŒì¼ ìˆ˜ì§‘ ì™„ë£Œ: {len(jsp_files)}ê°œ")
        return jsp_files
        
    except Exception as e:
        # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
        handle_error(e, "JSP íŒŒì¼ ìˆ˜ì§‘ ì‹¤íŒ¨")
        return []

def _is_file_included(self, file_path: str, include_patterns: List[str], exclude_patterns: List[str]) -> bool:
    """íŒŒì¼ í¬í•¨/ì œì™¸ íŒ¨í„´ í™•ì¸"""
    try:
        # í¬í•¨ íŒ¨í„´ í™•ì¸
        if include_patterns:
            if not any(pattern in file_path for pattern in include_patterns):
                return False
        
        # ì œì™¸ íŒ¨í„´ í™•ì¸
        if exclude_patterns:
            if any(pattern in file_path for pattern in exclude_patterns):
                return False
        
        return True
        
    except Exception as e:
        # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
        handle_error(e, f"íŒŒì¼ í¬í•¨/ì œì™¸ íŒ¨í„´ í™•ì¸ ì‹¤íŒ¨: {file_path}")

def _is_valid_jsp_file(self, file_path: str) -> bool:
    """ìœ íš¨í•œ JSP íŒŒì¼ì¸ì§€ í™•ì¸"""
    try:
        file_utils = FileUtils()
        content = file_utils.read_file(file_path)
        if not content:
            return False
        
        # JSP ì§€ì‹œì–´ë‚˜ íƒœê·¸ í™•ì¸
        jsp_indicators = [
            '<%@',  # JSP ì§€ì‹œì–´
            '<%',   # ìŠ¤í¬ë¦½í‹€ë¦¿
            '<%=',  # í‘œí˜„ì‹
            '<jsp:', # JSP ì•¡ì…˜
            '<c:',  # JSTL Core
            '<fmt:', # JSTL Formatting
            '<sql:', # JSTL SQL
            '<x:'   # JSTL XML
        ]
        
        content_lower = content.lower()
        return any(indicator in content_lower for indicator in jsp_indicators)
        
    except Exception as e:
        # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
        handle_error(e, f"JSP íŒŒì¼ í™•ì¸ ì‹¤íŒ¨: {file_path}")
```

### 3.3 JSP íŒŒì¼ íŒŒì‹± êµ¬í˜„
```python
def parse_jsp_file(self, jsp_file: str) -> Dict[str, Any]:
    """JSP íŒŒì¼ì—ì„œ ì»´í¬ë„ŒíŠ¸ ì •ë³´ ì¶”ì¶œ ë° Java ë©”ì„œë“œ ê´€ê³„ ë¶„ì„"""
    try:
        # JSP íŒŒì¼ ì½ê¸°
        file_utils = FileUtils()
        jsp_content = file_utils.read_file(jsp_file)
        
        if not jsp_content:
            # USER RULES: íŒŒì‹±ì—ëŸ¬ëŠ” has_error='Y', error_message ì €ì¥ í›„ ê³„ì† ì‹¤í–‰(exitì•ˆí•¨)
            return {
                'jsp_component': None,
                'java_method_relationships': [],
                'file_path': jsp_file,
                'has_error': 'Y',
                'error_message': 'JSP íŒŒì¼ ì½ê¸° ì‹¤íŒ¨'
            }
        
        # JSP ì»´í¬ë„ŒíŠ¸ ì •ë³´ ì¶”ì¶œ
        jsp_component = self._extract_jsp_component_info(jsp_content, jsp_file)
        
        # Java ë©”ì„œë“œ í˜¸ì¶œ ë¶„ì„
        java_method_relationships = self._analyze_java_method_calls(jsp_content, jsp_component)
        
        return {
            'jsp_component': jsp_component,
            'java_method_relationships': java_method_relationships,
            'file_path': jsp_file,
            'has_error': 'N',
            'error_message': None
        }
        
    except Exception as e:
        # USER RULES: íŒŒì‹±ì—ëŸ¬ëŠ” has_error='Y', error_message ì €ì¥ í›„ ê³„ì† ì‹¤í–‰(exitì•ˆí•¨)
        warning(f"JSP íŒŒì¼ íŒŒì‹± ì‹¤íŒ¨: {jsp_file}, ì˜¤ë¥˜: {str(e)}")
        return {
            'jsp_component': None,
            'java_method_relationships': [],
            'file_path': jsp_file,
            'has_error': 'Y',
            'error_message': f'JSP íŒŒì¼ íŒŒì‹± ì‹¤íŒ¨: {str(e)}'
        }
```

---

## 4. JSP íŒŒì‹± ì„¤ì • íŒŒì¼ (path_utils.get_parser_config_path ë°©ì‹)

### 4.1 ì „ì²´ ì„¤ì • íŒŒì¼ êµ¬ì¡°
```yaml
# JSP íŒŒì‹±ì„ ìœ„í•œ í‚¤ì›Œë“œ ë° íŒ¨í„´ ì„¤ì •

# JSP íƒœê·¸ íŒ¨í„´
jsp_scriptlet_patterns:
  - r'<%([^%]+)%>'  # ìŠ¤í¬ë¦½í‹€ë¦¿

jsp_expression_patterns:
  - r'<%=([^%]+)%>'  # í‘œí˜„ì‹

jsp_el_patterns:
  - r'\$\{([^}]+)\}'  # EL í‘œí˜„ì‹

jsp_jstl_patterns:
  - r'<c:([^>]+)>'  # JSTL Core
  - r'<fmt:([^>]+)>'  # JSTL Formatting
  - r'<sql:([^>]+)>'  # JSTL SQL
  - r'<x:([^>]+)>'  # JSTL XML

# Java ë©”ì„œë“œ í˜¸ì¶œ íŒ¨í„´
java_method_call_patterns:
  - r'(\w+)\.(\w+)\s*\('  # object.method()
  - r'(\w+)\s*\([^)]*\)'  # method()

# í´ë˜ìŠ¤ëª… ë§¤í•‘ (ê°ì²´ëª… â†’ í´ë˜ìŠ¤ëª…)
class_name_mapping:
  userService: UserService
  userController: UserController
  orderService: OrderService
  productService: ProductService

# ë©”ì„œë“œ-í´ë˜ìŠ¤ ë§¤í•‘ (ë©”ì„œë“œëª… â†’ í´ë˜ìŠ¤ëª…)
method_class_mapping:
  getUserList: UserService
  saveUser: UserService
  deleteUser: UserService
  getOrderList: OrderService
  saveOrder: OrderService

# JSP ì˜ˆì•½ì–´
jsp_reserved_keywords:
  - page
  - include
  - taglib
  - directive
```

---

## 5. main.py í†µí•©

### 5.1 main.py ìˆ˜ì • (5ë‹¨ê³„ í˜¸ì¶œ ì¶”ê°€)
```python
def main():
    """ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜"""
    try:
        # ì¸ì íŒŒì‹±
        args = parse_arguments()
        project_name = args.project_name
        
        # 1-2ë‹¨ê³„: íŒŒì¼ ìŠ¤ìº” ë° DB êµ¬ì¡° ì €ì¥
        file_loading_engine = FileLoadingEngine(project_name)
        if not file_loading_engine.execute_file_loading():
            # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
            handle_error(Exception("1-2ë‹¨ê³„ ì‹¤í–‰ ì‹¤íŒ¨"), "íŒŒì¼ ë¡œë”© ì‹¤íŒ¨")
        
        # 3ë‹¨ê³„: XML ë¶„ì„
        xml_loading_engine = XmlLoadingEngine(project_name)
        if not xml_loading_engine.execute_xml_loading():
            # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
            handle_error(Exception("3ë‹¨ê³„ ì‹¤í–‰ ì‹¤íŒ¨"), "XML ë¡œë”© ì‹¤íŒ¨")
        
        # 4ë‹¨ê³„: Java ë¶„ì„
        java_loading_engine = JavaLoadingEngine(project_name)
        if not java_loading_engine.execute_java_loading():
            # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
            handle_error(Exception("4ë‹¨ê³„ ì‹¤í–‰ ì‹¤íŒ¨"), "Java ë¡œë”© ì‹¤íŒ¨")
        
        # 5ë‹¨ê³„: JSP ë¶„ì„ (ìƒˆë¡œ ì¶”ê°€)
        jsp_loading_engine = JspLoadingEngine(project_name)
        if not jsp_loading_engine.execute_jsp_loading():
            # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
            handle_error(Exception("5ë‹¨ê³„ ì‹¤í–‰ ì‹¤íŒ¨"), "JSP ë¡œë”© ì‹¤íŒ¨")
        
        info("ëª¨ë“  ë‹¨ê³„ ì™„ë£Œ")
        
    except Exception as e:
        # USER RULES: íŒŒì‹±ì—ëŸ¬ë¥¼ ì œì™¸í•œ ëª¨ë“  exception ë°œìƒì‹œ handle_error()ë¡œ exit()í•´ì•¼ ì—ëŸ¬ì¸ì§€ê°€ ê°€ëŠ¥í•¨
        handle_error(e, "ë©”ì¸ ì‹¤í–‰ ì‹¤íŒ¨")
```

---

## 6. ë‹¤ìŒ ë‹¨ê³„

ë‹¤ìŒ ë¬¸ì„œì—ì„œëŠ” í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ ê³„íšì„ ì œì‹œí•©ë‹ˆë‹¤:
- [5. í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ ê³„íš](./20250914_184841_ìµœì¢…_5ë‹¨ê³„ê°œë°œê³„íšì„œ_05_í…ŒìŠ¤íŠ¸ë°ê²€ì¦ê³„íš.md)

---

**ë¬¸ì„œ ì‘ì„± ì™„ë£Œ**: 2025-09-14 18:48:41  
**ë¬¸ì„œ ë²„ì „**: v1.0 (ìµœì¢… í†µí•©ë³¸)  
**ë‹¤ìŒ ë¬¸ì„œ**: [5. í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ ê³„íš](./20250914_184841_ìµœì¢…_5ë‹¨ê³„ê°œë°œê³„íšì„œ_05_í…ŒìŠ¤íŠ¸ë°ê²€ì¦ê³„íš.md)
