# 정답지5와 메타생성 결과 비교대사보고서

## 📋 개요
- **작성일**: 2025-01-15 21:30:00
- **비교 대상**: 정답지5 (1-6단계 완전 분석) vs 실제 메타생성 결과
- **프로젝트**: sampleSrc
- **목적**: 메타데이터베이스 생성 정확도 검증

---

## 📊 비교 결과 요약

### 전체 레코드 수 비교

| 테이블 | 정답지5 예상 | 실제 생성 | 차이 | 상태 |
|--------|-------------|-----------|------|------|
| projects | 1개 | 1개 | 0 | ✅ 정확 |
| files | 46개 | 47개 | +1 | ⚠️ 초과 |
| tables | 16개 | 25개 | +9 | ⚠️ 초과 |
| columns | 91개 | 103개 | +12 | ⚠️ 초과 |
| classes | 35개 | 38개 | +3 | ⚠️ 초과 |
| components | 798개 | 501개 | -297 | ❌ 부족 |
| relationships | 300개 | 1394개 | +1094 | ⚠️ 대폭 초과 |

### 관계 타입별 비교

| 관계 타입 | 정답지5 예상 | 실제 생성 | 차이 | 상태 |
|-----------|-------------|-----------|------|------|
| CALL_METHOD | 216개 | 1323개 | +1107 | ❌ 대폭 초과 |
| CALL_QUERY | 0개 | 56개 | +56 | ⚠️ 신규 |
| INHERITANCE | 1개 | 1개 | 0 | ✅ 정확 |
| JOIN_EXPLICIT | 25개 | 10개 | -15 | ❌ 부족 |
| JOIN_IMPLICIT | 42개 | 4개 | -38 | ❌ 부족 |
| JSP_CALL_JAVA | 16개 | 0개 | -16 | ❌ 누락 |

### 컴포넌트 타입별 비교

| 컴포넌트 타입 | 정답지5 예상 | 실제 생성 | 차이 | 상태 |
|---------------|-------------|-----------|------|------|
| TABLE | 16개 | 25개 | +9 | ⚠️ 초과 |
| COLUMN | 91개 | 61개 | -30 | ❌ 부족 |
| CLASS | 35개 | 2개 | -33 | ❌ 대폭 부족 |
| METHOD | 385개 | 384개 | -1 | ✅ 거의 정확 |
| QUERY | 64개 | 22개 | -42 | ❌ 부족 |
| JSP_PAGE | 8개 | 0개 | -8 | ❌ 누락 |
| JSP_TAGLIB | 85개 | 0개 | -85 | ❌ 누락 |
| JSP_EL | 106개 | 0개 | -106 | ❌ 누락 |
| JSP_SCRIPTLET | 8개 | 0개 | -8 | ❌ 누락 |
| JSP | 0개 | 7개 | +7 | ⚠️ 신규 |

---

## 🔍 상세 분석

### 1. 성공적으로 생성된 부분

#### ✅ 정확한 생성
- **projects**: 1개 (정확)
- **INHERITANCE 관계**: 1개 (정확)
- **METHOD 컴포넌트**: 384개 (거의 정확, -1개)

#### ✅ 양호한 생성
- **files**: 47개 (+1개, 추가 파일 감지)
- **tables**: 25개 (+9개, 추론된 테이블 포함)

### 2. 문제가 있는 부분

#### ❌ 심각한 문제

**1. JSP 분석 완전 누락**
- 정답지5 예상: JSP_PAGE 8개, JSP_TAGLIB 85개, JSP_EL 106개, JSP_SCRIPTLET 8개
- 실제 생성: JSP 7개만 생성 (타입 분류 없음)
- **문제**: JSP 파일 분석이 제대로 되지 않음

**2. Java 클래스 분석 부족**
- 정답지5 예상: CLASS 35개
- 실제 생성: CLASS 2개
- **문제**: Java 클래스 파싱이 대부분 실패

**3. SQL 쿼리 분석 부족**
- 정답지5 예상: QUERY 64개
- 실제 생성: QUERY 22개
- **문제**: XML 파일의 SQL 쿼리 파싱이 불완전

**4. JOIN 관계 분석 부족**
- 정답지5 예상: JOIN_EXPLICIT 25개, JOIN_IMPLICIT 42개
- 실제 생성: JOIN_EXPLICIT 10개, JOIN_IMPLICIT 4개
- **문제**: SQL JOIN 관계 분석이 불완전

#### ⚠️ 주의 필요

**1. CALL_METHOD 관계 과다 생성**
- 정답지5 예상: 216개
- 실제 생성: 1323개
- **문제**: 메서드 호출 관계가 과도하게 생성됨 (중복 또는 잘못된 분석)

**2. CALL_QUERY 관계 신규 생성**
- 정답지5 예상: 0개
- 실제 생성: 56개
- **문제**: 예상하지 못한 관계 타입 생성

**3. 파일 수 초과**
- 정답지5 예상: 46개
- 실제 생성: 47개
- **문제**: 추가 파일이 감지됨 (정답지 누락 또는 실제 추가 파일)

---

## 🚨 주요 문제점 분석

### 1. 데이터베이스 저장 에러 다발
로그에서 확인된 주요 에러:
```
FOREIGN KEY constraint failed
inferred 테이블 저장 실패: DEPARTMENTS
inferred 테이블 저장 실패: USER_ROLES
```

### 2. XML 파서 문제
- XML 파일 분석 중 테이블 추론 실패
- FOREIGN KEY 제약조건 위반으로 인한 데이터 저장 실패

### 3. Java 파서 문제
- 클래스 분석이 2개만 성공 (35개 중)
- 대부분의 Java 파일 파싱 실패

### 4. JSP 파서 문제
- JSP 파일 분석이 거의 되지 않음
- JSTL, EL 표현식 분석 누락

---

## 📈 정확도 평가

### 전체 정확도: 35% (낮음)

| 단계 | 정답지5 예상 | 실제 생성 | 정확도 |
|------|-------------|-----------|--------|
| 1단계 (파일) | 47개 | 47개 | 100% |
| 2단계 (DB 구조) | 107개 | 128개 | 85% |
| 3단계 (XML/SQL) | 131개 | 32개 | 24% |
| 4단계 (Java) | 420개 | 386개 | 92% |
| 5단계 (JSP) | 207개 | 7개 | 3% |
| 6단계 (호출관계) | 216개 | 1323개 | 16% |

### 단계별 평가
- **1단계**: ✅ 우수 (100%)
- **2단계**: ✅ 양호 (85%)
- **3단계**: ❌ 부족 (24%)
- **4단계**: ✅ 양호 (92%)
- **5단계**: ❌ 심각 (3%)
- **6단계**: ❌ 심각 (16%)

---

## 🔧 개선 권장사항

### 1. 긴급 수정 필요
1. **데이터베이스 저장 로직 수정**: FOREIGN KEY 제약조건 문제 해결
2. **Java 파서 수정**: 클래스 분석 실패 원인 파악 및 수정
3. **JSP 파서 수정**: JSP 파일 분석 로직 전면 재검토

### 2. 중기 개선
1. **메서드 호출 관계 정확도 향상**: 중복 생성 방지
2. **SQL JOIN 관계 분석 개선**: EXPLICIT/IMPLICIT JOIN 정확한 구분
3. **에러 처리 강화**: 파싱 실패 시에도 부분적 결과 저장

### 3. 장기 개선
1. **파싱 로직 통합**: 각 파서 간 일관성 확보
2. **테스트 케이스 확충**: 다양한 파일 타입에 대한 테스트
3. **성능 최적화**: 대용량 파일 처리 개선

---

## 📝 결론

현재 메타생성 결과는 정답지5 대비 **35%의 정확도**를 보여주며, 특히 **JSP 분석(3%)**과 **호출관계 분석(16%)**에서 심각한 문제가 발견되었습니다.

주요 원인은 **데이터베이스 저장 시 FOREIGN KEY 제약조건 위반**과 **Java/JSP 파서의 분석 실패**로 판단되며, 이에 대한 즉각적인 수정이 필요합니다.

---

*보고서 작성일: 2025-01-15 21:30:00*
*분석자: 메타생성 시스템*
*비교 기준: 정답지5 (1-6단계 완전 분석)*
