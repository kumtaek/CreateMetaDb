# 5ë‹¨ê³„ Spring API ì§„ì…ì  ë¶„ì„ ê°œë°œê³„íšì„œ - ê°œë°œì ì˜ê²¬ (ê°±ì‹ )

## ğŸ“‹ ê°œìš”

**ë¬¸ì„œëª…**: 5ë‹¨ê³„_Phase1_Springê°œë°œê³„íšì„œ_20250915_133346_ê°œë°œìì˜ê²¬1.md  
**ì‘ì„±ì¼**: 2025-01-15 (ê°±ì‹ )  
**ì‘ì„±ì**: AI ê°œë°œì  
**ê²€í†  ëŒ€ìƒ**: 5ë‹¨ê³„_Phase1_Springê°œë°œê³„íšì„œ_20250915_133346.md  

## ğŸ” ê¸°ì¡´ ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„ ê²°ê³¼

### âœ… ê¸°ì¡´ íŒŒì„œë“¤ì˜ ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ í™•ì¸

**XML íŒŒì„œ (`xml_parser.py`)**:
- **Fallback ìˆœì„œ**: DOM â†’ SAX â†’ ì •ê·œì‹
- **ì—ëŸ¬ ì²˜ë¦¬**: `has_error='Y'`, `error_message` ì €ì¥ í›„ ê³„ì† ì§„í–‰
- **í•µì‹¬ ë¡œì§**:
```python
# 1ë‹¨ê³„: DOM ê¸°ë°˜ íŒŒì‹± ì‹œë„
dom_result = self._parse_with_dom(xml_file)
if dom_result and not dom_result.get('has_error'):
    return dom_result

# 2ë‹¨ê³„: SAX íŒŒì„œë¡œ Fallback
sax_result = sax_parser.parse_file(xml_file)
if sax_result and not sax_result.get('has_error'):
    return sax_result

# 3ë‹¨ê³„: ìµœì¢… Fallback - ì •ê·œì‹ ê¸°ë°˜ íŒŒì‹±
regex_result = self._parse_with_regex(xml_file)
if regex_result and not regex_result.get('has_error'):
    return regex_result

# ëª¨ë“  íŒŒì‹± ë°©ë²•ì´ ì‹¤íŒ¨í•œ ê²½ìš°
return {'has_error': 'Y', 'error_message': error_message}
```

**Java íŒŒì„œ (`java_parser.py`)**:
- **ì—ëŸ¬ ì²˜ë¦¬**: íŒŒì‹± ì—ëŸ¬ëŠ” `has_error='Y'`, `error_message` ë‚¨ê¸°ê³  ê³„ì† ì§„í–‰
- **í•µì‹¬ ë¡œì§**:
```python
except Exception as e:
    # USER RULES: íŒŒì‹± ì—ëŸ¬ëŠ” has_error='Y', error_message ë‚¨ê¸°ê³  ê³„ì† ì§„í–‰
    error_message = f"Java íŒŒì‹± ì¤‘ ì˜ˆì™¸ ë°œìƒ: {str(e)}"
    return {
        'has_error': 'Y',
        'error_message': error_message
    }
```

**SAX Fallback íŒŒì„œ (`sax_fallback_parser.py`)**:
- **ì—ëŸ¬ ì²˜ë¦¬**: íŒŒì‹±ì—ëŸ¬ëŠ” `has_error='Y'`, `error_message` ì €ì¥ í›„ ê³„ì† ì‹¤í–‰
- **í•µì‹¬ ë¡œì§**:
```python
except xml.sax.SAXParseException as e:
    # USER RULES: íŒŒì‹±ì—ëŸ¬ëŠ” has_error='Y', error_message ì €ì¥ í›„ ê³„ì† ì‹¤í–‰
    error_message = f"SAX íŒŒì‹± ì‹¤íŒ¨ (XML ë¬¸ë²• ì˜¤ë¥˜): {xml_file_path} - {str(e)}"
    return {
        'has_error': 'Y', 
        'error_message': error_message
    }
```

## âš ï¸ Spring íŒŒì„œ ê°œë°œ ì‹œ ê°œì„ ì 

### 1. Fallback ë°©ì‹ ì ìš©

**ê¸°ì¡´ XML íŒŒì„œ íŒ¨í„´ì„ Spring íŒŒì„œì— ì ìš©**:
```python
def analyze_spring_controller(self, file_path: str) -> Dict[str, Any]:
    """
    Spring ì»¨íŠ¸ë¡¤ëŸ¬ ë¶„ì„ - Fallback ë°©ì‹ ì ìš©
    AST â†’ ì •ê·œì‹ â†’ ë‹¨ìˆœ í…ìŠ¤íŠ¸ ë¶„ì„ ìˆœì„œë¡œ íŒŒì‹± ì‹œë„
    """
    # 1ë‹¨ê³„: AST ê¸°ë°˜ íŒŒì‹± ì‹œë„
    debug(f"AST ê¸°ë°˜ íŒŒì‹± ì‹œë„: {file_path}")
    ast_result = self._parse_with_ast(file_path)
    
    if ast_result and not ast_result.get('has_error'):
        debug(f"AST ê¸°ë°˜ íŒŒì‹± ì„±ê³µ: {file_path}")
        return ast_result
    else:
        debug(f"AST ê¸°ë°˜ íŒŒì‹± ì‹¤íŒ¨, ì •ê·œì‹ íŒŒì„œë¡œ Fallback: {file_path}")
        if ast_result:
            debug(f"AST íŒŒì‹± ì˜¤ë¥˜ ë©”ì‹œì§€: {ast_result.get('error_message')}")

    # 2ë‹¨ê³„: ì •ê·œì‹ ê¸°ë°˜ íŒŒì‹± ì‹œë„ (Fallback)
    debug(f"ì •ê·œì‹ ê¸°ë°˜ íŒŒì„œë¡œ Fallback: {file_path}")
    try:
        regex_result = self._parse_with_regex(file_path)
        if regex_result and not regex_result.get('has_error'):
            debug(f"ì •ê·œì‹ íŒŒì‹± ì„±ê³µ: {file_path}")
            return regex_result
        else:
            debug(f"ì •ê·œì‹ íŒŒì‹±ë„ ì‹¤íŒ¨, ë‹¨ìˆœ í…ìŠ¤íŠ¸ ë¶„ì„ìœ¼ë¡œ ìµœì¢… Fallback: {file_path}")
            if regex_result:
                debug(f"ì •ê·œì‹ íŒŒì‹± ì˜¤ë¥˜ ë©”ì‹œì§€: {regex_result.get('error_message')}")
    except Exception as regex_e:
        debug(f"ì •ê·œì‹ íŒŒì„œ ì´ˆê¸°í™” ì‹¤íŒ¨: {regex_e}")

    # 3ë‹¨ê³„: ìµœì¢… Fallback - ë‹¨ìˆœ í…ìŠ¤íŠ¸ ë¶„ì„
    debug(f"ë‹¨ìˆœ í…ìŠ¤íŠ¸ ë¶„ì„ìœ¼ë¡œ ìµœì¢… Fallback: {file_path}")
    try:
        text_result = self._parse_with_text_analysis(file_path)
        if text_result and not text_result.get('has_error'):
            debug(f"ë‹¨ìˆœ í…ìŠ¤íŠ¸ ë¶„ì„ ì„±ê³µ: {file_path}")
            return text_result
        else:
            # ëª¨ë“  íŒŒì‹± ë°©ë²•ì´ ì‹¤íŒ¨í•œ ê²½ìš°
            error_message = f"ëª¨ë“  íŒŒì‹± ë°©ë²•(AST, ì •ê·œì‹, í…ìŠ¤íŠ¸ë¶„ì„)ì´ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: {file_path}"
            return {
                'api_entries': [], 
                'file_path': file_path,
                'has_error': 'Y', 
                'error_message': error_message
            }
    except Exception as text_e:
        # ë‹¨ìˆœ í…ìŠ¤íŠ¸ ë¶„ì„ë§ˆì € ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°
        error_message = f"ë‹¨ìˆœ í…ìŠ¤íŠ¸ ë¶„ì„ë„ ì‹¤íŒ¨: {file_path} - {str(text_e)}"
        return {
            'api_entries': [], 
            'file_path': file_path,
            'has_error': 'Y', 
            'error_message': error_message
        }
```

### 2. íŒŒì‹± ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ í†µì¼

**ê¸°ì¡´ íŒŒì„œë“¤ê³¼ ë™ì¼í•œ ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´ ì ìš©**:
```python
def _parse_with_ast(self, file_path: str) -> Optional[Dict[str, Any]]:
    """
    AST ê¸°ë°˜ Spring ì»¨íŠ¸ë¡¤ëŸ¬ íŒŒì‹±
    """
    try:
        # AST íŒŒì‹± ë¡œì§
        tree = ast.parse(java_content)
        # ... íŒŒì‹± ë¡œì§ ...
        
        return {
            'api_entries': api_entries,
            'file_path': file_path
        }
        
    except SyntaxError as e:
        # ë¬¸ë²• ì˜¤ë¥˜ëŠ” ì •ìƒì ì¸ Fallback ìƒí™©
        debug(f"AST íŒŒì‹± ë¶ˆê°€, ì •ê·œì‹ìœ¼ë¡œ fallbackí•©ë‹ˆë‹¤: {file_path} (ì‚¬ìœ : {e})")
        return None
        
    except Exception as e:
        # ê¸°íƒ€ ì˜ˆì™¸ëŠ” ì—ëŸ¬ë¡œ ì²˜ë¦¬
        error_message = f"AST íŒŒì‹± ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜: {file_path} - {str(e)}"
        return {
            'api_entries': [],
            'file_path': file_path,
            'has_error': 'Y',
            'error_message': error_message
        }

def _parse_with_regex(self, file_path: str) -> Dict[str, Any]:
    """
    ì •ê·œì‹ ê¸°ë°˜ Spring ì»¨íŠ¸ë¡¤ëŸ¬ íŒŒì‹± (Fallback)
    """
    try:
        # ì •ê·œì‹ íŒŒì‹± ë¡œì§
        # ... íŒŒì‹± ë¡œì§ ...
        
        return {
            'api_entries': api_entries,
            'file_path': file_path
        }
        
    except Exception as e:
        # USER RULES: íŒŒì‹± ì—ëŸ¬ëŠ” has_error='Y', error_message ë‚¨ê¸°ê³  ê³„ì† ì§„í–‰
        error_message = f"ì •ê·œì‹ íŒŒì‹± ì‹¤íŒ¨: {file_path} - {str(e)}"
        return {
            'api_entries': [],
            'file_path': file_path,
            'has_error': 'Y',
            'error_message': error_message
        }
```

### 3. ë³‘ë ¬ ì²˜ë¦¬ ì œê±°

**ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ ë³‘ë ¬ ì²˜ë¦¬ ì œê±°**:
- ê¸°ì¡´ íŒŒì„œë“¤ë„ ìˆœì°¨ ì²˜ë¦¬ ë°©ì‹ ì‚¬ìš©
- Spring íŒŒì„œë„ ë™ì¼í•˜ê²Œ ìˆœì°¨ ì²˜ë¦¬ë¡œ êµ¬í˜„
- ì„±ëŠ¥ ìµœì í™”ëŠ” ìºì‹±ê³¼ ì •ê·œì‹ íŒ¨í„´ ì»´íŒŒì¼ë¡œ ëŒ€ì²´

### 4. ì„¤ì • íŒŒì¼ êµ¬ì¡° ê°œì„ 

**ê¸°ì¡´ íŒŒì„œë“¤ì˜ ì„¤ì • íŒŒì¼ íŒ¨í„´ ì°¸ê³ **:
```yaml
# spring_entry_keyword.yaml
spring_annotations:
  class_annotations:
    - name: "@RestController"
      description: "REST API ì»¨íŠ¸ë¡¤ëŸ¬"
      http_methods: ["GET", "POST", "PUT", "DELETE", "PATCH"]
      default_path: "/"
    - name: "@Controller"
      description: "ì›¹ ì»¨íŠ¸ë¡¤ëŸ¬"
      http_methods: ["GET", "POST"]
      default_path: "/"
      
  method_annotations:
    - name: "@RequestMapping"
      description: "ë²”ìš© ìš”ì²­ ë§¤í•‘"
      http_methods: ["GET", "POST", "PUT", "DELETE", "PATCH"]
      path_required: true
    - name: "@GetMapping"
      description: "GET ìš”ì²­ ë§¤í•‘"
      http_methods: ["GET"]
      path_required: false

# ì •ê·œì‹ íŒ¨í„´ (ê¸°ì¡´ íŒŒì„œë“¤ê³¼ ë™ì¼í•œ êµ¬ì¡°)
spring_parsing_patterns:
  class_patterns:
    - r'@RestController\s*.*?class\s+(\w+)'
    - r'@Controller\s*.*?class\s+(\w+)'
  method_patterns:
    - r'@RequestMapping\s*\([^)]*\)\s*.*?(\w+)\s*\('
    - r'@GetMapping\s*\([^)]*\)\s*.*?(\w+)\s*\('
```

### 5. ë°ì´í„° êµ¬ì¡° ê°œì„ 

**ê¸°ì¡´ íŒŒì„œë“¤ê³¼ ì¼ê´€ì„± ìœ ì§€**:
```python
api_component = {
    'component_type': 'API_ENTRY',
    'component_name': method_name,
    'api_path': api_path,
    'http_method': http_method,
    'parameters': parameters,
    'return_type': return_type,
    'file_path': file_path,
    'line_start': line_start,
    'line_end': line_end,
    'hash_value': hash_value,
    'has_error': 'N',  # ê¸°ë³¸ê°’
    'error_message': None
}
```

## ğŸš€ êµ¬í˜„ ìš°ì„ ìˆœìœ„ (ìˆ˜ì •)

### Phase 1.1: í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„ (1ì£¼)
1. **Spring ë¶„ì„ê¸° ê¸°ë³¸ êµ¬ì¡°** (`SpringAnalyzer` í´ë˜ìŠ¤)
2. **Fallback íŒŒì‹± ë¡œì§** (AST â†’ ì •ê·œì‹ â†’ í…ìŠ¤íŠ¸ë¶„ì„)
3. **ì—ëŸ¬ ì²˜ë¦¬ í†µì¼** (`has_error='Y'` ë°©ì‹)
4. **ê¸°ë³¸ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥**

### Phase 1.2: Spring ë¶„ì„ ë¡œì§ êµ¬í˜„ (1ì£¼)
1. **ì–´ë…¸í…Œì´ì…˜ íŒŒì‹± ë¡œì§** (AST ê¸°ë°˜)
2. **ì •ê·œì‹ Fallback** (ê¸°ì¡´ íŒŒì„œ íŒ¨í„´ ì°¸ê³ )
3. **API ê²½ë¡œ ì¶”ì¶œ** (ë‹¨ìˆœ í…ìŠ¤íŠ¸ ë¶„ì„ Fallback)
4. **ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…**

### Phase 1.3: í†µí•© ë° ìµœì í™” (1ì£¼)
1. **BackendEntryLoadingEngine í†µí•©**
2. **ì„±ëŠ¥ ìµœì í™”** (ìºì‹±, ì •ê·œì‹ íŒ¨í„´ ì»´íŒŒì¼)
3. **í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±** (ê¸°ì¡´ íŒŒì„œ í…ŒìŠ¤íŠ¸ íŒ¨í„´ ì°¸ê³ )
4. **ë¬¸ì„œí™” ë° ì˜ˆì œ**

## ğŸ“ ì¶”ê°€ ê³ ë ¤ì‚¬í•­

1. **ê¸°ì¡´ íŒŒì„œë“¤ê³¼ì˜ ì¼ê´€ì„±**: XML, Java íŒŒì„œì™€ ë™ì¼í•œ ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ ì‚¬ìš©
2. **Fallback ì „ëµ**: AST â†’ ì •ê·œì‹ â†’ í…ìŠ¤íŠ¸ë¶„ì„ ìˆœì„œë¡œ ì ì§„ì  Fallback
3. **ì„¤ì • íŒŒì¼ êµ¬ì¡°**: ê¸°ì¡´ íŒŒì„œë“¤ì˜ ì„¤ì • íŒŒì¼ íŒ¨í„´ê³¼ ì¼ê´€ì„± ìœ ì§€
4. **ë¡œê¹… ë°©ì‹**: ê¸°ì¡´ íŒŒì„œë“¤ê³¼ ë™ì¼í•œ ë¡œê¹… ë ˆë²¨ ë° ë©”ì‹œì§€ í˜•ì‹ ì‚¬ìš©
5. **ì„±ëŠ¥ ìµœì í™”**: ë³‘ë ¬ ì²˜ë¦¬ ëŒ€ì‹  ì •ê·œì‹ íŒ¨í„´ ì»´íŒŒì¼ê³¼ ìºì‹± í™œìš©

## ğŸ¯ ê²°ë¡ 

ê¸°ì¡´ íŒŒì„œë“¤ì˜ ì„±ê³µì ì¸ íŒ¨í„´ì„ Spring íŒŒì„œì— ì ìš©í•˜ì—¬ **ì¼ê´€ì„± ìˆëŠ” ì—ëŸ¬ ì²˜ë¦¬**, **íš¨ê³¼ì ì¸ Fallback ì „ëµ**, **ì•ˆì •ì ì¸ íŒŒì‹± ë¡œì§**ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ **íŒŒì‹± ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹**ê³¼ **Fallback ìˆœì„œ**ë¥¼ ê¸°ì¡´ íŒŒì„œë“¤ê³¼ ë™ì¼í•˜ê²Œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

---

**ë¬¸ì„œ ë²„ì „**: v2.0 (ê°±ì‹ )  
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-01-15  
**ê²€í†  ìƒíƒœ**: ì™„ë£Œ