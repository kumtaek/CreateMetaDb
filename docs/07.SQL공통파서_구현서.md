# SQL ê³µí†µíŒŒì„œ êµ¬í˜„ì„œ

## ê°œìš”

ë³¸ ë¬¸ì„œëŠ” XMLê³¼ Java íŒŒì„œì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” SQL ë¶„ì„ ëª¨ë“ˆì˜ êµ¬í˜„ ë‚´ìš©ì„ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

- **ì‘ì„±ì¼**: 2025-01-22 (2025-09-22 ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸° ë° ì¢…ë¥˜ ì¸ì‹ ê¸°ëŠ¥ ì¶”ê°€)
- **ëª©ì **: ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸° â†’ ì¿¼ë¦¬ ì¢…ë¥˜ ì¸ì‹ â†’ í…Œì´ë¸” ì¶”ì¶œ â†’ ì¡°ì¸ ë¶„ì„ í†µí•© ì²˜ë¦¬
- **ì ìš© ë²”ìœ„**: XML íŒŒì„œ, Java íŒŒì„œ, JPA íŒŒì„œ, ê³µí†µ SQL ë¶„ì„

## ğŸ“‹ ì¿¼ë¦¬ ë¶„ì„ê¸° ê°œì„  ì™„ë£Œ í˜„í™©

### ê°œì„  ëª©í‘œ ë‹¬ì„±
- ë©”ì†Œë“œ-ì¿¼ë¦¬-í…Œì´ë¸”-ì¡°ì¸ì¡°ê±´ ë„ì¶œ ì™„ë£Œ
- ë³µì¡í•˜ê³  ì •ë°€í•œ íŒŒì‹± ëŒ€ì‹  ëª©í‘œ ë³¸ì§ˆì— ì§‘ì¤‘í•œ ë‹¨ìˆœí•œ íŒ¨í„´ ë§¤ì¹­ êµ¬í˜„
- 3ë‹¨ê³„ ì¿¼ë¦¬ ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ì™„ì „ êµ¬í˜„

### êµ¬í˜„ ì™„ë£Œëœ 3ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤
1. **1ë‹¨ê³„**: JAVA, XML(MyBatis), JPAì—ì„œ ì¿¼ë¦¬ ì¶”ì¶œ ë° SqlContent.db ì €ì¥
   - **JAVA**: StringBuilder, String.format, ë¬¸ìì—´ ì—°ê²°ë¡œ ë™ì  ìƒì„±ë˜ëŠ” ì¿¼ë¦¬ ì¶”ì¶œ
   - **XML**: MyBatis íƒœê·¸ ì œê±°í•˜ì—¬ ìˆœìˆ˜ SQL ì¶”ì¶œ (ì •ê·œì‹ ê¸°ë°˜ ë‹¨ìˆœí™”)
   - **JPA**: @Query ì–´ë…¸í…Œì´ì…˜ì—ì„œ ê´„í˜¸ ì•ˆ ë¬¸ìì—´ë§Œ ì¶”ì¶œ (ë¬¸ë²• ì˜¤ë¥˜ ë¬´ì‹œ)
2. **2ë‹¨ê³„**: ì„¤ê³„ëœ íŒ¨í„´ì—ì„œ í…Œì´ë¸” ì¶”ì¶œ ë° INFERRED í…Œì´ë¸” ë“±ë¡
   - FROM, UPDATE, DELETE, INSERT, MERGE, JOIN íŒ¨í„´ì—ì„œ í…Œì´ë¸” ì¶”ì¶œ
   - ì˜¤ë¼í´ í‚¤ì›Œë“œ í•„í„°ë§ ì ìš©
3. **3ë‹¨ê³„**: ì¡°ì¸ê´€ê³„ ì¶”ì¶œ ë° relationships í…Œì´ë¸” ì €ì¥
   - EXPLICIT JOIN (JOIN ... ON), IMPLICIT JOIN (WHERE ...), MERGE JOIN ë¶„ì„

### ì„¤ê³„ëœ SQL íŒ¨í„´ (2ë‹¨ê³„ í…Œì´ë¸” ì¶”ì¶œìš©)
```
FROM <tables>
FROM <tables> WHERE
FROM <tables> GROUP
FROM <tables> ORDER
FROM <tables> UNION
FROM <tables>, (
FROM <tables> HAVING
FROM <tables> LIMIT
FROM <tables> FETCH
FROM <tables> FOR
FROM <tables> INTERSECT
FROM <tables> MINUS
FROM <tables> EXCEPT
UPDATE <tables> SET
DELETE FROM <tables>
DELETE FROM <tables> WHERE
INSERT INTO <tables> (
INSERT INTO <tables> SELECT
MERGE INTO <tables> USING
JOIN <tables> ON
USING <tables> ON
```

### ì„¤ê³„ëœ ì¡°ì¸ ë¶„ì„ íŒ¨í„´ (3ë‹¨ê³„ ì¡°ì¸ê´€ê³„ ì¶”ì¶œìš©)
```
â‘  WHERE ... <ì¡°ì¸ì¡°ê±´> --> JOIN_IMPLICIT
â‘¡ JOIN ... ON <ì¡°ì¸ì¡°ê±´> --> JOIN_EXPLICIT  
â‘¢ MERGE ... USING ... ON (<ì¡°ì¸ì¡°ê±´>) --> JOIN_MERGEON
```

---

## ğŸ“‹ êµ¬í˜„ ê°œìš”

### ë°°ê²½

XMLê³¼ Java íŒŒì„œ ëª¨ë‘ Enhanced íŒŒì‹± ê¸°ëŠ¥ì„ í†µí•´ ëˆ„ë½ ì—†ëŠ” SQL ì¶”ì¶œì´ ê°€ëŠ¥í•´ì¡Œìœ¼ë©°, ì¶”ì¶œëœ ëª¨ë“  SQLì— ëŒ€í•´ ì¼ê´€ëœ ê³ í’ˆì§ˆ ë¶„ì„ì´ í•„ìš”í•©ë‹ˆë‹¤.

### ëª©í‘œ

1. **ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸°**: Java/XML/JPA ë¬¸ë²• ì œê±°í•˜ì—¬ ìˆœìˆ˜ SQL ì¶”ì¶œ
2. **ì¿¼ë¦¬ ì¢…ë¥˜ ì¸ì‹**: ì£¼ì„ ì œê±° í›„ ì²« ë²ˆì§¸ í‚¤ì›Œë“œë¡œ INSERT/UPDATE/DELETE/MERGE/SELECT êµ¬ë¶„
3. **í…Œì´ë¸” ì¶”ì¶œ**: ì—ì„¼ìŠ¤íŒ¨í„´ìœ¼ë¡œ ëˆ„ë½ ì—†ëŠ” í…Œì´ë¸”ëª… ì¶”ì¶œ
4. **ì¡°ì¸ ë¶„ì„**: EXPLICIT/IMPLICIT JOIN ê´€ê³„ ë¶„ì„ ë° ì¸í¼ë“œ í…Œì´ë¸” ë“±ë¡
5. **ê³µí†µë¶€ í™œìš©**: ëª¨ë“  íŒŒì„œì—ì„œ ë™ì¼í•œ ê³ í’ˆì§ˆ SQL ë¶„ì„ ë³´ì¥

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ì„¤ê³„

### ì²˜ë¦¬ í”Œë¡œìš°

```mermaid
flowchart TD
    A[JAVA/XML/JPA íŒŒì¼] --> B[ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸°]
    B --> C[ì¿¼ë¦¬ ì¢…ë¥˜ ì¸ì‹]
    C --> D[í…Œì´ë¸” ì¶”ì¶œ]
    D --> E[ì¡°ì¸ ë¶„ì„]
    E --> F[ì¸í¼ë“œ í…Œì´ë¸” ë“±ë¡]
    
    B1[Java ë¬¸ë²• ì œê±°] --> B
    B2[XML MyBatis íƒœê·¸ ì œê±°] --> B
    B3[JPA @Query ì¶”ì¶œ] --> B
    
    C1[ì£¼ì„ ì œê±°] --> C
    C2[ì²« ë²ˆì§¸ í‚¤ì›Œë“œ ì¶”ì¶œ] --> C
    C3[INSERT/UPDATE/DELETE/MERGE/SELECT êµ¬ë¶„] --> C
    
    D1[FROM íŒ¨í„´] --> D
    D2[JOIN íŒ¨í„´] --> D
    D3[INSERT/UPDATE/DELETE/MERGE íŒ¨í„´] --> D
    
    E1[EXPLICIT JOIN ë¶„ì„] --> E
    E2[IMPLICIT JOIN ë¶„ì„] --> E
    E3[ê´€ê³„ í†µí•© ë° ì¤‘ë³µ ì œê±°] --> E
```

### í´ë˜ìŠ¤ êµ¬ì¡°

```mermaid
classDiagram
    class SqlParser {
        +extract_table_names(sql_content: str): Set[str]
        +determine_query_type(sql_content: str): str
        -_preprocess_sql(sql_content: str): str
        -_validate_and_filter_tables(table_names: Set[str]): Set[str]
    }
    
    class SqlJoinAnalyzer {
        +config: Dict
        +project_name: str
        +__init__(config: Optional[Dict])
        +analyze_join_relationships(sql_content: str, file_path: str, component_id: int): List[Dict]
        -_normalize_sql_for_analysis(sql_content: str, dynamic_patterns: dict): str
        -_find_base_and_aliases(sql_content: str, analysis_patterns: dict): Tuple[str, Dict]
        -_register_inferred_tables(extracted_tables: Set[str]): None
        -_register_single_inferred_table(table_name: str): None
    }
    
    class JavaParser {
        +sql_join_analyzer: SqlJoinAnalyzer
        +_extract_sql_queries_from_java(java_content: str, java_file: str): List[Dict]
        +_extract_jpa_queries(java_content: str, java_file: str): List[Dict]
        +_convert_jpa_method_queries(java_content: str, java_file: str): List[Dict]
        +_extract_stringbuilder_sql_queries(java_content: str, java_file: str): List[Dict]
        +_extract_stringformat_sql_queries(java_content: str, java_file: str): List[Dict]
        +_remove_java_syntax_from_sql(sql_content: str): str
        +_determine_query_type_common(clean_sql: str): str
    }
    
    class XmlParser {
        +sql_join_analyzer: SqlJoinAnalyzer
        +_extract_sql_content(element: ET.Element): str
        +_remove_xml_syntax_from_sql(sql_content: str): str
        +_remove_mybatis_tags(sql_content: str): str
        +_remove_binding_variables(sql_content: str): str
    }
    
    class JavaParser {
        +sql_join_analyzer: SqlJoinAnalyzer
        +_analyze_java_sql_joins(sql_content: str): List[Dict]
    }
    
    SqlJoinAnalyzer <-- XmlParser
    SqlJoinAnalyzer <-- JavaParser
```

### ëª¨ë“ˆ ê´€ê³„ë„

```mermaid
graph TD
    Config["`ğŸ”§ **ì„¤ì • íŒŒì¼**
    config/parser/sql_keyword.yaml`"]
    
    SqlJoinAnalyzer["`ğŸ” **SqlJoinAnalyzer**
    util/sql_join_analyzer.py`"]
    
    XmlParser["`ğŸ“„ **XmlParser**
    parser/xml_parser.py`"]
    
    JavaParser["`â˜• **JavaParser**
    parser/java_parser.py`"]
    
    Results["`ğŸ“Š **ë¶„ì„ ê²°ê³¼**
    JOIN ê´€ê³„ ë¦¬ìŠ¤íŠ¸`"]
    
    Config --> SqlJoinAnalyzer
    SqlJoinAnalyzer --> XmlParser
    SqlJoinAnalyzer --> JavaParser
    XmlParser --> Results
    JavaParser --> Results
    
    classDef config fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef common fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef parser fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef result fill:#e3f2fd,stroke:#0277bd,stroke-width:2px
    
    class Config config
    class SqlJoinAnalyzer common
    class XmlParser,JavaParser parser
    class Results result
```

---

## ğŸš€ 3ë‹¨ê³„ ì¿¼ë¦¬ ë¶„ì„ê¸° êµ¬í˜„ ì™„ë£Œ

### 1ë‹¨ê³„ - ì¿¼ë¦¬ ì¶”ì¶œ ë° ì¿¼ë¦¬ ì €ì¥(SqlContent.db)

#### JAVA ì¿¼ë¦¬ ì¶”ì¶œ
- **ë™ì  ì¿¼ë¦¬ ì²˜ë¦¬**: ë¬¸ìì—´ ë³€ìˆ˜ì˜ concaternation ëˆ„ì  ì²˜ë¦¬
- **ì§€ì› íŒ¨í„´**: `+=`, `StringBuffer.append()`, `StringBuilder.append()`
- **SQL í‚¤ì›Œë“œ í•„í„°ë§**: `SELECT`, `INSERT`, `UPDATE`, `DELETE`, `MERGE`ë¡œ ì‹œì‘í•˜ëŠ” ì¿¼ë¦¬ë§Œ ì¶”ì¶œ
- **ë¬¸ìì—´ ì •ê·œí™”**: ê³µë°±, íƒ­, ì£¼ì„ ì œê±° í›„ ì¿¼ë¦¬ ë³€ìˆ˜ ì‹ë³„
- **ì €ì¥ ë°©ì‹**: ì¿¼ë¦¬ë³€ìˆ˜ëª…ìœ¼ë¡œ componentsì™€ sqlcontent(ì••ì¶•)ì— ë“±ë¡

#### XML(MyBatis) ì¿¼ë¦¬ ì¶”ì¶œ
- **íƒœê·¸ ì œê±°**: XML íƒœê·¸ë¥¼ ì œê±°í•˜ê³  ìˆœìˆ˜ ì¿¼ë¦¬ ì¶”ì¶œ
- **ë™ì  SQL ì²˜ë¦¬**: `<if>`, `<choose>`, `<when>` ë“± MyBatis ë™ì  íƒœê·¸ ì²˜ë¦¬
- **ë°”ì¸ë”© ë³€ìˆ˜ ì²˜ë¦¬**: `#{param}`, `${param}` í˜•íƒœ ì²˜ë¦¬
- **ì €ì¥ ë°©ì‹**: componentsì™€ sqlcontentì— ë“±ë¡ í›„ ê³µí†µ 2,3ë‹¨ê³„ ì²˜ë¦¬

#### JPA ì¿¼ë¦¬ ì¶”ì¶œ
- **@Query ì–´ë…¸í…Œì´ì…˜**: `@Query` ì–´ë…¸í…Œì´ì…˜ì—ì„œ ì¿¼ë¦¬ ì¶”ì¶œ
- **JPQL vs Native SQL**: `nativeQuery = true` ì˜µì…˜ìœ¼ë¡œ êµ¬ë¶„
- **ë©”ì„œë“œ ì¿¼ë¦¬ ì œì™¸**: ì´ˆê¸° ë²„ì „ì—ì„œëŠ” `find...By...And...` íŒ¨í„´ì€ ì œì™¸
- **ì €ì¥ ë°©ì‹**: componentsì™€ sqlcontentì— ë“±ë¡ í›„ ê³µí†µ 2,3ë‹¨ê³„ ì²˜ë¦¬

### 2ë‹¨ê³„ - í…Œì´ë¸” ì¶”ì¶œ

#### ì„¤ê³„ëœ SQL íŒ¨í„´ ê¸°ë°˜ í…Œì´ë¸” ì¶”ì¶œ
ë‹¤ìŒ íŒ¨í„´ì—ì„œ í…Œì´ë¸”ì„ ì¶”ì¶œí•˜ì—¬ `<tables>` íŒŒì„œë¡œ ê³µí†µí™” ì²˜ë¦¬:

```sql
FROM <tables>           -- SELECT F FROM T (ë’¤ì— ì•„ë¬´ê²ƒë„ ì—†ëŠ” ê²½ìš°)
FROM <tables> WHERE     -- SELECT F FROM T WHERE
FROM <tables> (         -- SELECT F FROM T (ì„œë¸Œì¿¼ë¦¬)
UPDATE <tables> SET     -- UPDATE T SET
DELETE FROM <tables>    -- DELETE FROM T
DELETE FROM <tables> WHERE -- DELETE FROM T WHERE
INSERT INTO <tables> (  -- INSERT INTO T (
INSERT INTO <tables> SELECT -- INSERT INTO T SELECT
MERGE INTO <tables> USING -- MERGE INTO T USING
JOIN <tables> ON        -- JOIN T ON
```

#### í…Œì´ë¸” ì²˜ë¦¬ ë¡œì§
- **ì•Œë¦¬ì•„ìŠ¤ ì²˜ë¦¬**: í…Œì´ë¸”ê³¼ ì•Œë¦¬ì•„ìŠ¤ë¥¼ ë”•ì…”ë„ˆë¦¬ ë³€ìˆ˜ë¡œ ì €ì¥
- **ì˜¤ë¼í´ í‚¤ì›Œë“œ í•„í„°ë§**: config í´ë”ì˜ ì˜¤ë¼í´ í‚¤ì›Œë“œ íŒŒì¼ ì°¸ì¡°í•˜ì—¬ í‚¤ì›Œë“œ ì œì™¸
- **INFERRED í…Œì´ë¸” ë“±ë¡**: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í…Œì´ë¸”ì€ INFERREDë¡œ ë“±ë¡ (table_owner = 'UNKNOWN')
- **ì¤‘ë³µ ë°©ì§€**: (project_id, table_name)ìœ¼ë¡œ ì¡´ì¬ ì—¬ë¶€ ì²´í¬, INFERREDê°€ ì•„ë‹Œ í…Œì´ë¸” ìš°ì„ 

### 3ë‹¨ê³„ - ì¡°ì¸ê´€ê³„ ì¶”ì¶œ

#### ì¡°ì¸ ê´€ê³„ ì¶”ì¶œ íŒ¨í„´
```sql
JOIN ... ON <ì¡°ì¸ì¡°ê±´>   -- JOIN_EXPLICIT
WHERE ... <ì¡°ì¸ì¡°ê±´>     -- JOIN_IMPLICIT
```

#### ì¡°ì¸ ì¡°ê±´ ë¶„ì„
- **í…Œì´ë¸” ì•Œë¦¬ì•„ìŠ¤ ì°¸ì¡°**: 2ë‹¨ê³„ì—ì„œ ë„˜ê²¨ë°›ì€ ë”•ì…”ë„ˆë¦¬ ë³€ìˆ˜ í™œìš©
- **ì´í€„ ì¡°ê±´ í•„í„°ë§**: `í…Œì´ë¸”1.ì»¬ëŸ¼1 = í…Œì´ë¸”2.ì»¬ëŸ¼2` í˜•íƒœë§Œ ì¡°ì¸ì¡°ê±´ìœ¼ë¡œ ì¸ì‹
- **1:N ê´€ê³„ ì²˜ë¦¬**: columns í…Œì´ë¸” ì°¸ì¡°í•˜ì—¬ PKìª½ì„ 1ìª½ìœ¼ë¡œ, Nìª½ì„ dst_idë¡œ ì„¤ì •
- **ë°©í–¥ ë¶ˆëª…í™• ì‹œ**: ì¤‘ë³µ ì œê±°ë¥¼ ìœ„í•´ ì‘ì€ component_idë¥¼ src_idì— ì €ì¥

#### INFERRED ì»¬ëŸ¼ ë“±ë¡
- **ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¬ëŸ¼**: columns, componentsì— ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ INFERRED ì»¬ëŸ¼ ë“±ë¡
- **ì¤‘ë³µ ë°©ì§€**: ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œë§Œ ë“±ë¡í•˜ì—¬ ì¤‘ë³µ ìŠ¤í‚µ
- **ì˜¤ë¼í´ í‚¤ì›Œë“œ í•„í„°ë§**: ì¡°ì¸ì¡°ê±´ ì»¬ëŸ¼ì´ ì˜¤ë¼í´ í‚¤ì›Œë“œë©´ ìŠ¤í‚µ

---

## ğŸ” ìƒì„¸ êµ¬í˜„

### 1. SqlJoinAnalyzer í´ë˜ìŠ¤

#### ì´ˆê¸°í™” ë° ì„¤ì •

```python
class SqlJoinAnalyzer:
    def __init__(self, config: Optional[Dict] = None):
        self.config = config or self._load_default_config()
        
    def _load_default_config(self) -> Dict:
        # PathUtilsë¥¼ ì‚¬ìš©í•œ í¬ë¡œìŠ¤í”Œë«í¼ ì„¤ì • ë¡œë“œ
        path_utils = PathUtils()
        config_path = path_utils.get_parser_config_path("sql")
        return self._load_sql_patterns()
```

#### í•µì‹¬ ë¶„ì„ ë©”ì„œë“œ

```python
def analyze_join_relationships(self, sql_content: str, file_path: str = "", component_id: int = 0):
    """SQL ì¡°ì¸ ê´€ê³„ ë¶„ì„ ë©”ì¸ ë©”ì„œë“œ"""
    # 1. SQL ì •ê·œí™”
    normalized_sql = self._normalize_sql_for_analysis(sql_content, dynamic_patterns)
    
    # 2. FROM ì ˆ ë¶„ì„ (ê¸°ë³¸ í…Œì´ë¸”ê³¼ ë³„ì¹­ ë§µ)
    base_table, alias_map = self._find_base_and_aliases(normalized_sql, analysis_patterns)
    
    # 3. EXPLICIT JOIN ë¶„ì„ (ANSI í‘œì¤€)
    explicit_relationships = self._analyze_explicit_join_chain(...)
    
    # 4. IMPLICIT JOIN ë¶„ì„ (Oracle ì „í†µ ë°©ì‹)
    implicit_relationships = self._analyze_implicit_joins_in_where(...)
    
    # 5. í›„ì²˜ë¦¬ (ì¤‘ë³µ ì œê±°, ì •ê·œí™”)
    return self._post_process_relationships(all_relationships, alias_map)
```

### 2. ì§€ì›í•˜ëŠ” SQL íŒ¨í„´

#### EXPLICIT JOIN (ANSI í‘œì¤€)

```sql
-- LEFT JOIN
SELECT u.user_id, o.order_id 
FROM users u 
LEFT JOIN orders o ON u.user_id = o.user_id

-- INNER JOIN  
SELECT u.name, p.product_name
FROM users u
INNER JOIN orders o ON u.user_id = o.user_id
INNER JOIN products p ON o.product_id = p.product_id
```

#### IMPLICIT JOIN (Oracle ì „í†µ ë°©ì‹)

```sql
-- ì½¤ë§ˆ êµ¬ë¶„ + WHERE ì¡°ê±´
SELECT u.user_id, o.order_id
FROM users u, orders o
WHERE u.user_id = o.user_id

-- Oracle (+) ì™¸ë¶€ ì¡°ì¸
SELECT u.user_id, o.order_id  
FROM users u, orders o
WHERE u.user_id = o.user_id(+)
```

### 3. ì„¤ì • ê¸°ë°˜ íŒ¨í„´ ë§¤ì¹­

#### ì •ê·œì‹ íŒ¨í„´ (config/parser/sql_keyword.yaml)

```yaml
sql_analysis_patterns:
  # FROM ì ˆ ë¶„ì„ íŒ¨í„´
  from_clause:
    - "FROM\\s+([a-zA-Z_][a-zA-Z0-9_]*)(?:\\s+([a-zA-Z_][a-zA-Z0-9_]*))?(?:\\s*,\\s*([a-zA-Z_][a-zA-Z0-9_]*)(?:\\s+([a-zA-Z_][a-zA-Z0-9_]*))?)?"

  # EXPLICIT JOIN ë¶„ì„ íŒ¨í„´  
  explicit_joins:
    - "(LEFT\\s+(?:OUTER\\s+)?JOIN)\\s+([a-zA-Z_][a-zA-Z0-9_]*)(?:\\s+([a-zA-Z_][a-zA-Z0-9_]*))?\\s+ON\\s+(.+?)(?=\\s+(?:LEFT|RIGHT|FULL|INNER|CROSS|NATURAL|WHERE|GROUP|ORDER|$))"
    - "(INNER\\s+JOIN)\\s+([a-zA-Z_][a-zA-Z0-9_]*)(?:\\s+([a-zA-Z_][a-zA-Z0-9_]*))?\\s+ON\\s+(.+?)(?=\\s+(?:LEFT|RIGHT|FULL|INNER|CROSS|NATURAL|WHERE|GROUP|ORDER|$))"

  # IMPLICIT JOIN ë¶„ì„ íŒ¨í„´
  implicit_joins:
    - "([a-zA-Z_][a-zA-Z0-9_]*)\\.([a-zA-Z_][a-zA-Z0-9_]*)\\s*=\\s*([a-zA-Z_][a-zA-Z0-9_]*)\\.([a-zA-Z_][a-zA-Z0-9_]*)"
    - "([a-zA-Z_][a-zA-Z0-9_]*)\\.([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\(\\+\\)\\s*=\\s*([a-zA-Z_][a-zA-Z0-9_]*)\\.([a-zA-Z_][a-zA-Z0-9_]*)"
```

---

## ğŸ› ï¸ ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸° ë° ì¢…ë¥˜ ì¸ì‹

### 1. ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸° (Query Extraction)

#### Java íŒŒì„œ ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸°

**ë³€ìˆ˜ ì»¨ì¼€í„°ë„¤ì´ì…˜ ëˆ„ì  ì²˜ë¦¬:**
```java
String query1 = "SELECT * FROM";
String query2 = "INSERT INTO ORDERS";
query1 = query1 + " WHERE status = 'ACTIVE'";
query1 += " AND id > 0";
```

**ì§€ì›í•˜ëŠ” íŒ¨í„´:**
- `String query = "SELECT * FROM";`
- `query = query + " WHERE";`
- `query += " WHERE";`
- `StringBuffer sb = new StringBuffer("INSERT INTO");`
- `sb.append(" USERS");`

**SQL í‚¤ì›Œë“œ í•„í„°ë§:**
- `SELECT`, `INSERT`, `UPDATE`, `DELETE`, `MERGE`ê°€ í¬í•¨ëœ ë³€ìˆ˜ë§Œ ì¶”ì¶œ
- ì£¼ì„ ì œê±° í›„ SQL í‚¤ì›Œë“œë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸

```python
def _extract_sql_queries_from_java(self, java_content: str, java_file: str) -> List[Dict[str, Any]]:
    """Java íŒŒì¼ì—ì„œ SQL ì¿¼ë¦¬ ì¶”ì¶œ (ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸° ë¡œì§ í¬í•¨)"""
    sql_queries = []
    
    # 1. JPA @Query ì¶”ì¶œ
    jpa_queries = self._extract_jpa_queries(java_content, java_file)
    sql_queries.extend(jpa_queries)
    
    # 2. JPA ë©”ì„œë“œ ì¿¼ë¦¬ ë³€í™˜
    jpa_method_queries = self._convert_jpa_method_queries(java_content, java_file)
    sql_queries.extend(jpa_method_queries)
    
    # 3. StringBuilder ë™ì  ì¿¼ë¦¬ ì¶”ì¶œ
    stringbuilder_queries = self._extract_stringbuilder_sql_queries(java_content, java_file)
    sql_queries.extend(stringbuilder_queries)
    
    # 4. String.format() ë™ì  ì¿¼ë¦¬ ì¶”ì¶œ
    stringformat_queries = self._extract_stringformat_sql_queries(java_content, java_file)
    sql_queries.extend(stringformat_queries)
    
    return sql_queries
```

#### XML íŒŒì„œ ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸°

**XML íƒœê·¸ ì œê±°:**
- MyBatis ë™ì  íƒœê·¸ ì œê±° (`<if>`, `<choose>`, `<when>`, `<otherwise>`)
- ë°”ì¸ë”© ë³€ìˆ˜ ì œê±° (`#{param}`, `${param}`)
- XML ì£¼ì„ ì œê±° (`<!-- -->`)

```python
def _remove_xml_syntax_from_sql(self, sql_content: str) -> str:
    """XML ë¬¸ë²• ì œê±°í•˜ì—¬ ìˆœìˆ˜ SQL ì¶”ì¶œ"""
    # 1. MyBatis ë™ì  íƒœê·¸ ì œê±°
    sql_content = self._remove_mybatis_tags(sql_content)
    
    # 2. ë°”ì¸ë”© ë³€ìˆ˜ ì œê±°
    sql_content = self._remove_binding_variables(sql_content)
    
    # 3. ë¶ˆí•„ìš”í•œ ê³µë°± ì •ë¦¬
    sql_content = re.sub(r'\s+', ' ', sql_content).strip()
    
    return sql_content
```

#### JPA íŒŒì„œ ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸°

**JPA @Query ì¶”ì¶œ:**
- `@Query` ì–´ë…¸í…Œì´ì…˜ì—ì„œ ì¿¼ë¦¬ ì¶”ì¶œ
- `:name` íŒŒë¼ë¯¸í„°ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ (ì˜ë¯¸ íŒŒì•… ê°€ëŠ¥)
- JPA ë©”ì„œë“œ ì¿¼ë¦¬ëŠ” SQLë¡œ ë³€í™˜

```python
def _extract_jpa_queries(self, java_content: str, java_file: str) -> List[Dict[str, Any]]:
    """JPA @Query ì–´ë…¸í…Œì´ì…˜ì—ì„œ ì¿¼ë¦¬ ì¶”ì¶œ"""
    # @Query("SELECT u FROM User u WHERE u.name = :name")
    # -> "SELECT u FROM User u WHERE u.name = :name"
```

### 2. ì¿¼ë¦¬ ì¢…ë¥˜ ì¸ì‹ (Query Type Recognition)

#### SQL íŒŒì„œ ì¿¼ë¦¬ ì¢…ë¥˜ ì¸ì‹

```python
def determine_query_type(self, sql_content: str) -> str:
    """SQL ì¿¼ë¦¬ ì¢…ë¥˜ ì¸ì‹"""
    if not sql_content or not sql_content.strip():
        return 'SQL_UNKNOWN'

    # 1. SQL ì „ì²˜ë¦¬ (ì£¼ì„ ì œê±°, ëŒ€ë¬¸ì ë³€í™˜)
    processed_sql = self._preprocess_sql(sql_content)
    
    # 2. ì²« ë²ˆì§¸ í‚¤ì›Œë“œ ì¶”ì¶œ
    first_word = processed_sql.strip().split()[0] if processed_sql.strip() else ""
    
    # 3. ì¿¼ë¦¬ ì¢…ë¥˜ ê²°ì •
    if first_word == 'INSERT':
        return 'SQL_INSERT'
    elif first_word == 'UPDATE':
        return 'SQL_UPDATE'
    elif first_word == 'DELETE':
        return 'SQL_DELETE'
    elif first_word == 'MERGE':
        return 'SQL_MERGE'
    else:
        # ê·¸ ì™¸ ëª¨ë“  ê²ƒ (SELECT, WITH, ë“±)ì€ SELECTë¡œ ì²˜ë¦¬
        return 'SQL_SELECT'
```

### 3. ì—ì„¼ìŠ¤íŒ¨í„´ í…Œì´ë¸” ì¶”ì¶œ

#### ì„¤ê³„ëœ SQL íŒ¨í„´ ê¸°ë°˜ í…Œì´ë¸” ì¶”ì¶œ

**FROM íŒ¨í„´:**
```sql
FROM <tables>           -- SELECT * FROM USERS
FROM <tables> WHERE     -- SELECT * FROM USERS WHERE
FROM <tables> (         -- SELECT * FROM USERS (ì„œë¸Œì¿¼ë¦¬)
```

**UPDATE íŒ¨í„´:**
```sql
UPDATE <tables> SET     -- UPDATE USERS SET name = 'John'
```

**INSERT íŒ¨í„´:**
```sql
INSERT INTO <tables> (  -- INSERT INTO USERS (id, name)
INSERT INTO <tables> SELECT  -- INSERT INTO USERS SELECT * FROM TEMP
```

**DELETE íŒ¨í„´:**
```sql
DELETE FROM <tables>    -- DELETE FROM USERS
DELETE FROM <tables> WHERE  -- DELETE FROM USERS WHERE id = 1
```

**MERGE íŒ¨í„´:**
```sql
MERGE INTO <tables> USING  -- MERGE INTO USERS USING (SELECT ...)
```

**JOIN íŒ¨í„´:**
```sql
JOIN <tables> ON        -- JOIN ORDERS ON users.id = orders.user_id
```

#### í…Œì´ë¸” ì¶”ì¶œ ë¡œì§

```python
def _extract_tables_from_patterns(self, sql_content: str) -> Set[str]:
    """ì„¤ê³„ëœ íŒ¨í„´ì—ì„œ í…Œì´ë¸” ì¶”ì¶œ"""
    tables = set()
    
    # FROM íŒ¨í„´ (3ê°€ì§€)
    from_patterns = [
        r'FROM\s+([A-Z_][A-Z0-9_]*)\s*$',           # FROM USERS
        r'FROM\s+([A-Z_][A-Z0-9_]*)\s+WHERE',       # FROM USERS WHERE
        r'FROM\s+([A-Z_][A-Z0-9_]*)\s*\('            # FROM USERS (
    ]
    
    # UPDATE íŒ¨í„´
    update_pattern = r'UPDATE\s+([A-Z_][A-Z0-9_]*)\s+SET'
    
    # INSERT íŒ¨í„´ (2ê°€ì§€)
    insert_patterns = [
        r'INSERT\s+INTO\s+([A-Z_][A-Z0-9_]*)\s*\(',
        r'INSERT\s+INTO\s+([A-Z_][A-Z0-9_]*)\s+SELECT'
    ]
    
    # DELETE íŒ¨í„´ (2ê°€ì§€)
    delete_patterns = [
        r'DELETE\s+FROM\s+([A-Z_][A-Z0-9_]*)\s*$',
        r'DELETE\s+FROM\s+([A-Z_][A-Z0-9_]*)\s+WHERE'
    ]
    
    # MERGE íŒ¨í„´
    merge_pattern = r'MERGE\s+INTO\s+([A-Z_][A-Z0-9_]*)\s+USING'
    
    # JOIN íŒ¨í„´
    join_pattern = r'JOIN\s+([A-Z_][A-Z0-9_]*)\s+ON'
    
    # ëª¨ë“  íŒ¨í„´ ì ìš©
    all_patterns = from_patterns + [update_pattern] + insert_patterns + delete_patterns + [merge_pattern, join_pattern]
    
    for pattern in all_patterns:
        matches = re.findall(pattern, sql_content, re.IGNORECASE)
        tables.update(matches)
    
    return tables
```

### 4. ì¡°ì¸ê´€ê³„ ë„ì¶œ

#### EXPLICIT JOIN ë¶„ì„
```sql
-- JOIN ... ON íŒ¨í„´
SELECT u.user_id, o.order_id
FROM users u
LEFT JOIN orders o ON u.user_id = o.user_id
```

#### IMPLICIT JOIN ë¶„ì„
```sql
-- WHERE ì¡°ê±´ì˜ ì¡°ì¸
SELECT u.user_id, o.order_id
FROM users u, orders o
WHERE u.user_id = o.user_id
```

#### ì¡°ì¸ê´€ê³„ ì¶”ì¶œ ë¡œì§
```python
def _extract_join_relationships(self, sql_content: str) -> List[Dict]:
    """ì¡°ì¸ê´€ê³„ ì¶”ì¶œ"""
    relationships = []
    
    # EXPLICIT JOIN ë¶„ì„
    explicit_joins = self._extract_explicit_joins(sql_content)
    relationships.extend(explicit_joins)
    
    # IMPLICIT JOIN ë¶„ì„
    implicit_joins = self._extract_implicit_joins(sql_content)
    relationships.extend(implicit_joins)
    
    return relationships
```

### 5. í…ŒìŠ¤íŠ¸ ê²°ê³¼

#### ì¿¼ë¦¬ ì¢…ë¥˜ ì¸ì‹ í…ŒìŠ¤íŠ¸ (21/21 ì„±ê³µ)

| SQL ì¿¼ë¦¬ | ì˜ˆìƒ ê²°ê³¼ | ì‹¤ì œ ê²°ê³¼ | ìƒíƒœ |
|----------|-----------|-----------|------|
| `SELECT * FROM users_v1 WHERE del_yn = 'N'` | SQL_SELECT | SQL_SELECT | PASS |
| `INSERT INTO users_v1 (username, del_yn) VALUES ('admin', 'N')` | SQL_INSERT | SQL_INSERT | PASS |
| `UPDATE users_v1 SET del_yn = 'Y' WHERE user_id = ?` | SQL_UPDATE | SQL_UPDATE | PASS |
| `DELETE FROM users_v1 WHERE del_yn = 'Y'` | SQL_DELETE | SQL_DELETE | PASS |
| `MERGE INTO users_v1 u USING (SELECT 'admin' as username FROM dual) s` | SQL_MERGE | SQL_MERGE | PASS |
| `-- ì£¼ì„\nSELECT * FROM users_v1` | SQL_SELECT | SQL_SELECT | PASS |

#### ë¬¸ì œ í•´ê²° í™•ì¸

**ì´ì „ ë¬¸ì œ:**
```java
// isValidOrder ë©”ì†Œë“œ
String status = (String) orderData.get("status");
return List.of("PENDING", "CONFIRMED", "SHIPPED").contains(status);
```
- `status`, `PENDING`, `CONFIRMED`, `SHIPPED`ê°€ í…Œì´ë¸”ë¡œ ì¸ì‹ë¨

**í•´ê²° í›„:**
- SQL íŒ¨í„´ì´ ì•„ë‹Œ ë‹¨ìˆœ ë¬¸ìì—´ì€ í…Œì´ë¸”ë¡œ ì¸ì‹ë˜ì§€ ì•ŠìŒ
- `SELECT`, `INSERT`, `UPDATE`, `DELETE`, `MERGE` íŒ¨í„´ë§Œ í…Œì´ë¸” ì¶”ì¶œ

---

## ğŸ”„ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

### XML íŒŒì„œ ì‚¬ìš© ì‹œí€€ìŠ¤

```mermaid
sequenceDiagram
    participant XE as XmlLoadingEngine
    participant XP as XmlParser
    participant SJA as SqlJoinAnalyzer
    participant Config as ì„¤ì •íŒŒì¼
    participant DB as metadata.db
    
    XE->>XP: parse_xml_file(xml_file)
    XP->>XP: extract_sql_queries()
    
    loop ê° SQL ì¿¼ë¦¬ë§ˆë‹¤
        XP->>SJA: _analyze_join_relationships(sql_content, file_path, component_id)
        
        SJA->>Config: ì„¤ì • íŒ¨í„´ ë¡œë“œ
        Config-->>SJA: sql_analysis_patterns
        
        SJA->>SJA: _normalize_sql_for_analysis()
        SJA->>SJA: _find_base_and_aliases()
        SJA->>SJA: _analyze_explicit_join_chain()
        SJA->>SJA: _analyze_implicit_joins_in_where()
        SJA->>SJA: _post_process_relationships()
        
        SJA-->>XP: JOIN ê´€ê³„ ë¦¬ìŠ¤íŠ¸
        
        XP->>XP: XML íŒŒì„œ íŠ¹í™” í›„ì²˜ë¦¬ (INFERRED ì»¬ëŸ¼ ìƒì„±)
        XP->>DB: components í…Œì´ë¸” ì €ì¥
        XP->>DB: relationships í…Œì´ë¸” ì €ì¥
    end
```

### Java íŒŒì„œ ì‚¬ìš© ì‹œí€€ìŠ¤

```mermaid
sequenceDiagram
    participant JE as JavaLoadingEngine  
    participant JP as JavaParser
    participant SJA as SqlJoinAnalyzer
    participant Config as ì„¤ì •íŒŒì¼
    participant DB as metadata.db
    
    JE->>JP: parse_java_file(java_file)
    JP->>JP: _extract_sql_queries_from_java()
    
    loop ê° SQL ì¿¼ë¦¬ë§ˆë‹¤
        JP->>SJA: analyze_join_relationships(sql_content, "java_source", 0)
        
        SJA->>Config: ì„¤ì • íŒ¨í„´ ë¡œë“œ
        Config-->>SJA: sql_analysis_patterns
        
        SJA->>SJA: _normalize_sql_for_analysis()
        SJA->>SJA: _find_base_and_aliases()
        SJA->>SJA: _analyze_explicit_join_chain()
        SJA->>SJA: _analyze_implicit_joins_in_where()
        SJA->>SJA: _post_process_relationships()
        
        SJA-->>JP: JOIN ê´€ê³„ ë¦¬ìŠ¤íŠ¸
        
        JP->>JP: Java íŒŒì„œìš© í˜•ì‹ ë³€í™˜
        JE->>DB: components í…Œì´ë¸” ì €ì¥
        JE->>DB: relationships í…Œì´ë¸” ì €ì¥
    end
```

---

## ğŸ›¡ï¸ ì•ˆì „ì„± ë³´ì¥

### XML íŒŒì„œ í˜¸í™˜ì„± ìœ ì§€

ê¸°ì¡´ XML íŒŒì„œ í˜¸ì¶œìë“¤ì˜ ì˜í–¥ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ ë˜í¼ íŒ¨í„´ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤:

```python
# parser/xml_parser.py
class XmlParser:
    def __init__(self):
        self.config = self._load_config()
        # ê³µí†µ SQL ì¡°ì¸ ë¶„ì„ê¸° ì´ˆê¸°í™”
        self.sql_join_analyzer = SqlJoinAnalyzer(self.config)
    
    def _analyze_join_relationships(self, sql_content: str, file_path: str, component_id: int):
        """
        JOIN ê´€ê³„ ë¶„ì„ (ê³µí†µ ëª¨ë“ˆ ì‚¬ìš© ë˜í¼)
        
        ê¸°ì¡´ XML íŒŒì„œ í˜¸ì¶œìë“¤ì„ ìœ„í•´ ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ë¥¼ ìœ ì§€í•˜ë©´ì„œ
        ë‚´ë¶€ì ìœ¼ë¡œëŠ” ê³µí†µ SQL ì¡°ì¸ ë¶„ì„ ëª¨ë“ˆì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
        """
        try:
            # XML íŒŒì„œ íŠ¹í™” ì²˜ë¦¬ (DOM íŒŒì‹±, XML íŒŒì‹± ì—ëŸ¬ ì²´í¬ ë“±)
            # ...
            
            # ê³µí†µ SQL ì¡°ì¸ ë¶„ì„ ëª¨ë“ˆ ì‚¬ìš©
            join_relationships = self.sql_join_analyzer.analyze_join_relationships(
                sql_content, file_path, component_id
            )
            
            # XML íŒŒì„œ íŠ¹í™” í›„ì²˜ë¦¬ (INFERRED ì»¬ëŸ¼ ìƒì„± ë“±)
            # ...
            
            return join_relationships
        except Exception as e:
            handle_error(e, f"JOIN ê´€ê³„ ë¶„ì„ ì‹¤íŒ¨: {file_path}")
            return []
```

### ë³´ì¥ì‚¬í•­

1. **ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ ìœ ì§€**: ê¸°ì¡´ í˜¸ì¶œì ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”
2. **ë™ì‘ í˜¸í™˜ì„±**: ê¸°ì¡´ê³¼ ë™ì¼í•œ ê²°ê³¼ ë°˜í™˜
3. **ì—ëŸ¬ ì²˜ë¦¬**: ê¸°ì¡´ ì—ëŸ¬ ì²˜ë¦¬ ë¡œì§ ë³´ì¡´
4. **XML íŠ¹í™” ê¸°ëŠ¥**: DOM íŒŒì‹±, MyBatis ë™ì  íƒœê·¸ ì²˜ë¦¬ ë“± ìœ ì§€

---

## ğŸ“Š í˜„ì¬ êµ¬í˜„ ìƒíƒœ

### SQL ì¡°ì¸ ë¶„ì„ ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì§€ì› ìƒíƒœ | ì„¤ëª… |
|------|-----------|------|
| **EXPLICIT JOIN** | âœ… ì™„ì „ ì§€ì› | INNER JOIN, LEFT JOIN, RIGHT JOIN, FULL OUTER JOIN |
| **IMPLICIT JOIN** | âœ… Oracle ì§€ì› | WHERE ì¡°ê±´ì˜ í…Œì´ë¸” ì—°ê²° ë¶„ì„ |
| **Oracle (+) êµ¬ë¬¸** | âœ… ì§€ì› | Oracle ì™¸ë¶€ ì¡°ì¸ êµ¬ë¬¸ (+) í•´ì„ |
| **ë³„ì¹­ í•´ì„** | âœ… ê³ ê¸‰ | í…Œì´ë¸” ë³„ì¹­ ë° ì»¬ëŸ¼ ë³„ì¹­ ì •í™•í•œ ë§¤í•‘ |
| **ë™ì  íƒœê·¸ ì²˜ë¦¬** | âœ… ë²”ìš© | MyBatis ë™ì  SQL íƒœê·¸ ë‚´ ì¡°ì¸ ë¶„ì„ |
| **ìœ ì§€ë³´ìˆ˜ì„±** | âœ… ìš°ìˆ˜ | ë‹¨ì¼ ëª¨ë“ˆë¡œ í†µí•© ê´€ë¦¬ |

### í˜„ì¬ íŠ¹ì§•

1. âœ… **í†µí•© ëª¨ë“ˆ**: XMLê³¼ Java íŒŒì„œì—ì„œ ê³µí†µ ì‚¬ìš©
2. âœ… **ì—°ê´€ê´€ê³„ ì¤‘ì‹¬**: JOIN ê´€ê³„ ë„ì¶œì— ìµœì í™”
3. âœ… **ì•ˆì •ì  ì²˜ë¦¬**: ì •ê·œì‹ ê¸°ë°˜ìœ¼ë¡œ ì•ˆì •ì„± í™•ë³´

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

#### 1. EXPLICIT JOIN í…ŒìŠ¤íŠ¸

```sql
SELECT u.user_id, o.order_id, p.product_name
FROM users u
LEFT JOIN orders o ON u.user_id = o.user_id  
INNER JOIN products p ON o.product_id = p.product_id
```

**ì˜ˆìƒ ê²°ê³¼**:
```python
[
    {
        'source_table': 'USERS',
        'target_table': 'ORDERS', 
        'rel_type': 'JOIN_EXPLICIT',
        'join_type': 'LEFT_JOIN',
        'confidence': 0.9
    },
    {
        'source_table': 'ORDERS',
        'target_table': 'PRODUCTS',
        'rel_type': 'JOIN_EXPLICIT', 
        'join_type': 'INNER_JOIN',
        'confidence': 0.9
    }
]
```

#### 2. IMPLICIT JOIN í…ŒìŠ¤íŠ¸

```sql
SELECT u.user_id, o.order_id
FROM users u, orders o  
WHERE u.user_id = o.user_id(+)
```

**ì˜ˆìƒ ê²°ê³¼**:
```python
[
    {
        'source_table': 'USERS',
        'target_table': 'ORDERS',
        'rel_type': 'JOIN_IMPLICIT',
        'join_type': 'ORACLE_OUTER_JOIN', 
        'confidence': 0.8
    }
]
```

### ê²€ì¦ ë°©ë²•

1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**: ê° ë©”ì„œë“œë³„ ë…ë¦½ í…ŒìŠ¤íŠ¸
2. **í†µí•© í…ŒìŠ¤íŠ¸**: XML/Java íŒŒì„œì™€ì˜ ì—°ë™ í…ŒìŠ¤íŠ¸  
3. **íšŒê·€ í…ŒìŠ¤íŠ¸**: ê¸°ì¡´ XML íŒŒì„œ ê²°ê³¼ì™€ ë¹„êµ
4. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**: ëŒ€ìš©ëŸ‰ SQL ì²˜ë¦¬ ì„±ëŠ¥ ì¸¡ì •

---

## ğŸ”§ ì„¤ì • ë° í™•ì¥

### ì„¤ì • íŒŒì¼ êµ¬ì¡°

```yaml
# config/parser/sql_keyword.yaml
sql_analysis_patterns:
  from_clause: [...]
  explicit_joins: [...]
  implicit_joins: [...]

join_type_mapping:
  "LEFT\\s+(?:OUTER\\s+)?JOIN": "LEFT_JOIN"
  "INNER\\s+JOIN": "INNER_JOIN" 
  "RIGHT\\s+(?:OUTER\\s+)?JOIN": "RIGHT_JOIN"
  "ORACLE_OUTER": "ORACLE_OUTER_JOIN"

dynamic_sql_patterns:
  dynamic_tags: [...]
```

### í™•ì¥ í¬ì¸íŠ¸

1. **ìƒˆë¡œìš´ JOIN íƒ€ì… ì¶”ê°€**: ì„¤ì • íŒŒì¼ì— íŒ¨í„´ ì¶”ê°€
2. **ë°ì´í„°ë² ì´ìŠ¤ë³„ íŠ¹í™”**: Oracle, MySQL, PostgreSQL ë“±
3. **ë‹¤ë¥¸ íŒŒì„œ ì§€ì›**: JSP, Python ë“± ì¶”ê°€ íŒŒì„œì—ì„œ ì¬ì‚¬ìš©
4. **ë¶„ì„ ì•Œê³ ë¦¬ì¦˜ ê°œì„ **: ML ê¸°ë°˜ ì¡°ì¸ ê´€ê³„ ì¶”ë¡  ë“±

---

## ğŸ“ ê´€ë ¨ íŒŒì¼

### í•µì‹¬ êµ¬í˜„ íŒŒì¼

- `util/sql_join_analyzer.py` - ê³µí†µ SQL ì¡°ì¸ ë¶„ì„ ëª¨ë“ˆ
- `parser/xml_parser.py` - XML íŒŒì„œ (ë˜í¼ ë°©ì‹ ì ìš©)
- `parser/java_parser.py` - Java íŒŒì„œ (ê³µí†µ ëª¨ë“ˆ ì‚¬ìš©)

### ì„¤ì • íŒŒì¼

- `config/parser/sql_keyword.yaml` - SQL ë¶„ì„ íŒ¨í„´ ë° í‚¤ì›Œë“œ
- `config/parser/java_keyword.yaml` - Java íŒŒì„œ ì„¤ì •
- `config/parser/xml_parser_config.yaml` - XML íŒŒì„œ ì„¤ì •

### í…ŒìŠ¤íŠ¸ íŒŒì¼

- `temp/test_sql_join_analyzer.py` - ê³µí†µ ëª¨ë“ˆ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- `temp/test_xml_java_integration.py` - í†µí•© í…ŒìŠ¤íŠ¸

---

## ğŸš€ í–¥í›„ ê°œì„  ê³„íš

### Phase 1 (ì™„ë£Œ)
- âœ… ê¸°ë³¸ EXPLICIT/IMPLICIT JOIN ë¶„ì„
- âœ… Oracle (+) êµ¬ë¬¸ ì§€ì›  
- âœ… XML/Java íŒŒì„œ í†µí•©
- âœ… ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸° ë° ì¢…ë¥˜ ì¸ì‹
- âœ… ì—ì„¼ìŠ¤íŒ¨í„´ í…Œì´ë¸” ì¶”ì¶œ

### Phase 2 (ì™„ë£Œ)
- âœ… 3ë‹¨ê³„ ì¿¼ë¦¬ ë¶„ì„ í”„ë¡œì„¸ìŠ¤ êµ¬í˜„ ì™„ë£Œ
- âœ… Java ë³€ìˆ˜ ì»¨ì¼€í„°ë„¤ì´ì…˜ ëˆ„ì  ì²˜ë¦¬ ì™„ë£Œ
- âœ… XML/JPA ì¿¼ë¦¬ ë„ë ¤ë‚´ê¸° ê°œì„  ì™„ë£Œ
- âœ… ì„¤ê³„ëœ SQL íŒ¨í„´ ê¸°ë°˜ í…Œì´ë¸” ì¶”ì¶œ ì™„ë£Œ
- âœ… ë©”ì†Œë“œ-ì¿¼ë¦¬-í…Œì´ë¸”-ì¡°ì¸ì¡°ê±´ ë„ì¶œ ì™„ë£Œ

### Phase 3 (ê³„íš)  
- ğŸ“‹ INFERRED í…Œì´ë¸”/ì»¬ëŸ¼ ìë™ ìƒì„± ê³ ë„í™”
- ğŸ“‹ ë³µì¡í•œ ì„œë¸Œì¿¼ë¦¬ JOIN ë¶„ì„
- ğŸ“‹ CTE (Common Table Expression) ì§€ì›
- ğŸ“‹ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ ë°©ì–¸ ì§€ì› (MySQL, PostgreSQL)
- ğŸ“‹ ML ê¸°ë°˜ ì¡°ì¸ ê´€ê³„ ì¶”ë¡ 
- ğŸ“‹ ì„±ëŠ¥ ìµœì í™” (ë³‘ë ¬ ì²˜ë¦¬, ìºì‹±)

---

**ì‘ì„±ì**: AI Assistant  
**ìµœì¢… ìˆ˜ì •**: 2025-01-22  
**ë²„ì „**: 2.0 (ì¿¼ë¦¬ ë¶„ì„ê¸° ê°œì„ )